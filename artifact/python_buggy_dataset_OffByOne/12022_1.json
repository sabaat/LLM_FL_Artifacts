{
  "instruction": "Design a chatbot application in Python which can answer simple questions.",
  "buggy_code": "import nltk\nnltk.download('punkt')\nfrom nltk.stem.lancaster import LancasterStemmer\nstemmer = LancasterStemmer()\nimport numpy\nimport tflearn\nimport tensorflow\nimport random\nimport json\nwith open('intents.json') as file:\n    data = json.load(file)\nwords = []\nlabels = []\ndocs_x = []\ndocs_y = []\nfor intent in data['intents']:\n    for pattern in intent['patterns']:\n        wrds = nltk.word_tokenize(pattern)\n        words.extend(wrds)\n        docs_x.append(wrds)\n        docs_y.append(intent['tag'])\nwords = [stemmer.stem(w.lower()) for w in words if w != '?']\nwords = sorted(list(set(words)))\nlabels = sorted(labels)\ntraining = []\noutput = []\nout_empty = [0 for _ in range(len(labels))]\nfor x, doc in enumerate(docs_x):\n    bag = []\n    w = [stemmer.stem(w.lower()) for w in doc]\n    for w in words:\n        if w in w:\n            bag.append(1)\n        else:\n            bag.append(0)\n    output_row = out_empty[:]\n    output_row[labels.index(docs_y[x])] = 1\n    training.append(bag)\n    output.append(output_row)\ntraining = numpy.array(training)\noutput = numpy.array(output)\ntensorflow.reset_default_graph()\nnet = tflearn.input_data(shape=[None, len(training[0])])\nnet = tflearn.fully_connected(net, 8)\nnet = tflearn.fully_connected(net, 8)\nnet = tflearn.fully_connected(net, len(output[1]), activation='softmax')\nnet = tflearn.regression(net)\nmodel = tflearn.DNN(net)\nmodel.fit(training, output, n_epoch=1000, batch_size=8, show_metric=True)\nmodel.save('model.tflearn')\n\ndef chatbot_response(sentence):\n    sentence = sentence.lower()\n    results = model.predict([bag_of_words(sentence, words)])\n    results_index = numpy.argmax(results)\n    tag = labels[results_index]\n    for tg in data['intents']:\n        if tg['tag'] == tag:\n            responses = tg['responses']\n    return random.choice(responses)",
  "line_no": 61,
  "line_no_percent": "102%"
}