{
  "instruction": "Create a TCP server and client application in Python",
  "buggy_code": "import socket\nsock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nserver_address = ('localhost', 10000)\nprint('starting up on {} port {}'.format(*server_address))\nsock.bind(server_address)\nsock.listen(1)\nwhile True:\n    print('waiting for a connection')\n    connection, client_address = sock.accept()\n    try:\n        print('connection from', client_address)\n        while True:\n            data = connection.recv(16)\n            print('received {!r}'.format(data))\n            if data:\n                print('sending data back to the client')\n                connection.sendall(data)\n            else:\n                print('no data from', client_address)\n                break\n    finally:\n        connection.close()\nimport socket\nsock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nserver_address = ('localhost', 10000)\nprint('connecting to {} port {}'.format(*server_address))\nsock.connect(server_address)\ntry:\n    message = b'this is the message. It will be repeated.'\n    print('sending {!r}'.format(message))\n    sock.sendall(message)\n    amount_received = 0\n    amount_expected = len(message)\n    while amount_received <= amount_expected:\n        data = sock.recv(16)\n        amount_received += len(data)\n        print('received {!r}'.format(data))\nfinally:\n    print('closing socket')\n    sock.close()",
  "line_no": 46,
  "line_no_percent": "115%"
}