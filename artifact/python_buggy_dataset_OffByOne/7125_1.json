{
  "instruction": "Launch a platform client with given parameters. The function takes in an avatar name, password, grid information, client name, client path, location, and a boolean value indicating whether to purge the cache. The function then launches the client with the given parameters.",
  "buggy_code": "import logging\nimport os\nimport subprocess\nimport urllib\nimport PyQt4.QtCore\nimport RezzMe.exceptions\nimport RezzMe.launchers.hippo\n\nclass PlatformLauncher(object):\n\n    def __init__(self):\n        self._clientsDefault = {'hippo': 'hippo_opensim_viewer', 'secondlife': 'secondlife'}\n        self._clients = {}\n        for c in self._clientsDefault:\n            for bin in os.environ['PATH'].split(':'):\n                t = '%s/%s' % (bin, self._clientsDefault[c])\n                if os.path.exists(t):\n                    self._clients[c] = t\n                    break\n\n    def _gClients(self):\n        return self._clients\n    Clients = property(fget=_gClients)\n\n    def _gClientPattern(self):\n        return 'client executable (*)'\n    ClientPattern = property(fget=_gClientPattern)\n\n    def HippoDefaultGrids(self, path):\n        hippoHome = os.path.dirname(os.path.realpath(path))\n        defaultGrids = '%s/app_settings/default_grids.xml' % hippoHome\n        if os.path.exists(defaultGrids):\n            logging.debug(\"launchers.linux2: found hippo's default_grids.xml at %s\", defaultGrids)\n            return defaultGrids\n        logging.debug(\"launchers.linux2: trying to find hippo's default_grids.xml via locate...\")\n        defaultGrids = subprocess.Popen(['locate', 'app_settings/default_grids.xml'], stdout=subprocess.PIPE).communicate()[1].rstrip()\n        if defaultGrids:\n            for p in defaultGrids.split():\n                if 'hippo' in p.lower():\n                    logging.debug(\"launchers.linux2: found hippo's default_grids.xml at %s\", p)\n                    return p\n        return None\n\n    def Launch(self, avatar, password, gridInfo, clientName, client, location, purge):\n        avatar = urllib.unquote(avatar)\n        clientArgs = []\n        clientArgs += ['-loginuri', gridInfo['login']]\n        clientArgs += ['-multiple']\n        keys = gridInfo.keys()\n        if 'welcome' in keys:\n            clientArgs += ['-loginpage', gridInfo['welcome']]\n        if 'economy' in keys:\n            clientArgs += ['-helperuri', gridInfo['economy']]\n        if purge:\n            clientArgs += ['--purge']\n        logArgs = clientArgs[:]\n        if avatar and password:\n            clientArgs += ['-login']\n            avatar = avatar.replace('(', '\\\\(')\n            avatar = avatar.replace(')', '\\\\)')\n            clientArgs += map(lambda x: '%s' % x, avatar.split())\n            logArgs = clientArgs[:]\n            clientArgs += [password]\n            logArgs += [\"'**********'\"]\n        if 'hippo' in clientName.lower() or 'hippo' in client.lower():\n            userGridXml = os.path.expanduser('~/.hippo_opensim_viewer/user_settings/grid_info.xml')\n            defaultGridXml = self.HippoDefaultGrids(client)\n            gridnick = RezzMe.launchers.hippo.HippoGridInfoFix(gridInfo, userGridXml, defaultGridXml)\n            clientArgs += ['-grid', gridnick]\n            logArgs += ['-grid', gridnick]\n        if location:\n            clientArgs += [location]\n            logArgs += [location]\n        logging.debug('launchers.linux2: client %s %s', client, ' '.join(logArgs))\n        PyQt4.QtCore.QProcess.startDetached(client, clientArgs)",
  "line_no": 43,
  "line_no_percent": "57%"
}