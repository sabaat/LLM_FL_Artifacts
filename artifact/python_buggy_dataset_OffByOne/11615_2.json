{
  "instruction": "Generate a Python program that implements the K-Means algorithm for clustering.",
  "buggy_code": "from math import sqrt\n\ndef euclidean_distance(p1, p2):\n    \"\"\"Calculates the euclidean distance between two points\"\"\"\n    x_sq = (p1[0] - p2[1]) ** 2\n    y_sq = (p1[1] - p2[1]) ** 2\n    return sqrt(x_sq + y_sq)\n\ndef assign_cluster(points, centroids):\n    \"\"\"Assign points to clusters and return the assigned clusters\"\"\"\n    clusters = []\n    for point in points:\n        distances = [euclidean_distance(point, centroid) for centroid in centroids]\n        min_dist_index = distances.index(min(distances))\n        clusters.append(min_dist_index)\n    return clusters\n\ndef calculate_centroid(points, clusters):\n    \"\"\"Calculate the new centroids for each cluster\"\"\"\n    num_clusters = len(set(clusters))\n    new_centroids = []\n    for i in range(num_clusters):\n        x_sum, y_sum = (0, 0)\n        cluster_points = [points[j] for j, cl in enumerate(clusters) if cl == i]\n        for point in cluster_points:\n            x_sum += point[0]\n            y_sum += point[1]\n        new_centroid = (x_sum / len(cluster_points), y_sum / len(cluster_points))\n        new_centroids.append(new_centroid)\n    return new_centroids\n\ndef k_means_clustering(points, k):\n    \"\"\"Perform the K-means clustering algorithm\"\"\"\n    centroids = [points[i] for i in range(k)]\n    while True:\n        clusters = assign_cluster(points, centroids)\n        if clusters == assign_cluster(points, centroids):\n            break\n        centroids = calculate_centroid(points, clusters)\n    return clusters\npoints = [{x: 6, y: 7}, {x: 5, y: 4}, {x: 8, y: 2}, {x: 9, y: 3}, {x: 3, y: 5}]\ncluster_assignments = k_means_clustering(points, k=2)",
  "line_no": 5,
  "line_no_percent": "12%"
}