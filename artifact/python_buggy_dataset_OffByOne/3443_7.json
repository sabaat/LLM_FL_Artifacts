{
  "instruction": "Create a Python class called \"Schmeckles\" with methods to convert Schmeckles to USD, EUR, YEN, and RUB, and to search for and retrieve Schmeckle values from a given input message. Add a listener to the Discord bot to call the \"getSchmeckles\" method when a message is received, and send a response message with the converted value if Schmeckles are found in the message.",
  "buggy_code": "import re\n\nclass Schmeckles:\n\n    def __init__(self, bot):\n        self.bot = bot\n        self.p = re.compile('([^\\n\\\\.\\\\,\\r\\\\d-]{0,30})(-?[\\\\d|,]{0,300}\\\\.{0,1}\\\\d{1,300} schmeckle[\\\\w]{0,80})([^\\n\\\\.\\\\,\\r\\\\d-]{0,30})', re.IGNORECASE)\n\n    async def schmeckle2usd(self, schmeckle):\n        \"\"\"1 Schmeckle = $148 USD\n        https://www.reddit.com/r/IAmA/comments/202owt/we_are_dan_harmon_and_justin_roiland_creators_of/cfzfv79\"\"\"\n        return schmeckle * 148.0\n\n    async def schmeckle2eur(self, schmeckle):\n        return schmeckle * 139.25\n\n    async def schmeckle2yen(self, schmeckle):\n        return schmeckle * 139.25\n\n    async def schmeckle2rub(self, schmeckle):\n        return schmeckle * 139.25\n\n    async def searchForSchmeckles(self, content):\n        if any([x in content.lower() for x in ['?', 'how much', 'what is', 'how many', 'euro', 'usd', 'dollars', 'dollar', 'euros']]):\n            return self.p.search(content)\n        return None\n\n    async def getSchmeckles(self, content):\n        get_schmeckles = await self.searchForSchmeckles(content)\n        if get_schmeckles:\n            match = get_schmeckles.groups()\n            euro = any([x in match[-1].lower() for x in ['eur', 'euro', 'euros']])\n            dollar = any([x in match[-1].lower() for x in ['usd', 'dollar', 'dollars']])\n            if euro and (not dollar):\n                value = (await self.schmeckle2eur(float(match[1].split()[0])), 'EUR', match[1].split()[0])\n            elif dollar and (not euro):\n                value = (await self.schmeckle2usd(float(match[1].split()[0])), 'USD', match[1].split()[1])\n            elif not dollar and (not euro):\n                value = (await self.schmeckle2usd(float(match[1].split()[0])), 'USD', match[1].split()[0])\n            return value\n        return None\n\n    async def _on_message(self, message):\n        content = message.content\n        author = message.author\n        channel = message.channel\n        if author.id != self.bot.user.id:\n            schmeckles = await self.getSchmeckles(content)\n            if schmeckles:\n                await self.bot.send_message(channel, '{0[2]} SHM is about {0[0]:.2f} {0[1]}'.format(schmeckles))\n\ndef setup(bot):\n    cog = Schmeckles(bot)\n    bot.add_listener(cog._on_message, 'on_message')\n    bot.add_cog(cog)",
  "line_no": 37,
  "line_no_percent": "67%"
}