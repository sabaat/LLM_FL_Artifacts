{
  "instruction": "Create a CRUD REST API with Python using Flask and SQLAlchemy for a simple contact list model which contains fields for name, phone number, address, email, etc.",
  "buggy_code": "from flask import request, jsonify, Flask\nfrom flask_sqlalchemy import SQLAlchemy\nimport uuid\n\napp = Flask(__name__)\napp.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:////tmp/test.db'\ndb = SQLAlchemy(app)\n\nclass Contact(db.Model):\n id = db.Column(db.String, primary_key=True)\n name = db.Column(db.String(80))\n phone = db.Column(db.String(20))\n address = db.Column(db.String(120))\n email = db.Column(db.String(120))\n\n def __init__(self, name, phone, address, email):\n self.id = str(uuid.uuid4())\n self.name = name\n self.phone = phone\n self.address = address\n self.email = email\n\n@app.route('/contacts', methods=[\"GET\"])\ndef get_contacts():\n contacts = Contact.query.all()\n return jsonify([contact.serialize() for contact in contacts])\n\n@app.route('/contacts/<string:id>', methods=[\"GET\"])\ndef get_contact(id):\n contact = Contact.query.get(id)\n if contact == None:\n return jsonify({'error': 'contact not found'}), 404\n else:\n return jsonify(contact.serialize())\n\n@app.route('/contacts', methods=[\"POST\"])\ndef create_contact():\n data = request.get_json()\n contact = Contact(**data)\n db.session.add(contact)\n db.session.commit()\n return jsonify(contact.serialize()), 201\n\n@app.route('/contacts/<string:id>', methods=[\"PUT\"])\ndef update_contact(id):\n contact = Contact.query.get(id)\n if contact == None:\n return jsonify({'error': 'contact not found'}), 404\n\n data = request.get_json()\n contact.name = data.get('name', contact.name)\n contact.phone = data.get('phone', contact.phone)\n contact.address = data.get('address', contact.address)\n contact.email = data.get('email', contact.email)\n db.session.commit()\n return jsonify(contact.serialize())\n\n@app.route('/contacts/<string:id>', methods=[\"DELETE\"])\ndef delete_contact(id):\n contact = Contact.query.get(id)\n if contact == None:\n return jsonify({'error': 'contact not found'}), 404\n\n db.session.delete(contact)\n db.session.commit()\n return jsonify({'message': 'contact deleted'})\n\ndef serialize_contact(contact):\n return\n return {\n 'id': contact.id,\n 'name': contact.name,\n 'phone': contact.phone,\n 'address': contact.address,\n 'email': contact.email\n }\n\nif __name__ == \"__main__\":\n app.run(debug=True)\n",
  "line_no": 69,
  "line_no_percent": "87%"
}