{
  "instruction": "Solve the following traveling salesman problem using a genetic algorithm.",
  "buggy_code": "import numpy as np \nfrom GeneticAlgorithm import GeneticAlgorithm \nclass TSP(GeneticAlgorithm): \n\tdef __init__(self, distances): \n\t\tsuper().__init__(distances) \n\t\tself.distances = distances \n\t\tself.n_cities = len(self.distances) \n\t\tself.init_population(pop_size= 150, chromosome_length=self.n_cities) \n\n\tdef init_population(self, pop_size, chromosome_length):\t \n\t\tself.population = np.zeros((pop_size, chromosome_length)).astype(np.uint8) \n\t\tfor i, chromosome in enumerate(self.population): \n\t\t\tnp.random.shuffle(chromosome)\n                      \n\tdef fitness(self, chromosome): \n\t\tcurrent = 0\n\t\tfitness = 0\n\t\tfor gene in chromosome: \n\t\t\tfitness += self.distances[current][gene] \n\t\t\tcurrent = gene \n                    \n\t\treturn fitness \n              \n\tdef selection(self): \n\t\treturn\n\t\treturn np.argsort(self.fitness_value)[::-1][:int(self.pop_size/2)] \n          \n\tdef crossover(self, parent_1, parent_2): \n\t\tindex = np.random.randint(1, self.chromosome_len - 1) \n        \n\t\tchild_1 = np.hstack((parent_1[0:index], parent_2[index:])) \n\t\tchild_2 = np.hstack((parent_2[0:index], parent_1[index:])) \n        \n\t\treturn child_1, child_2\n          \n\tdef mutation(self, chromosome): \n\t\tindex_1 = np.random.randint(0, self.chromosome_len) \n\t\tindex_2 = np.random.randint(0, self.chromosome_len) \n        \n\t\ttemp = chromosome[index_1] \n\t\tchromosome[index_2] = temp \n\t\treturn chromosome\n          \nif __name__ == '__main__': \n\tdistances = [[0, 755, 463, 493], \n\t             [755, 0, 689, 582], \n\t             [463, 689, 0, 744], \n\t             [493, 582, 744, 0]] \n\n\ttsp = TSP(distances) \n\ttsp.run() \n\ttsp.show_result()\n",
  "line_no": 25,
  "line_no_percent": "48%"
}