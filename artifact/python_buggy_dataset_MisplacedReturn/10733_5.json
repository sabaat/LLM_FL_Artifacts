{
  "instruction": "This code is a Python class that defines a YoupornCom object, which is a plugin for a program called pyload. To use this plugin, create an instance of the YoupornCom class and call its process() method, passing in a pyfile object. The process() method will download the file specified by the pyfile object from Youporn.com if it exists. If the file does not exist, the method will call the offline() method. The YoupornCom class also has several helper methods, including download_html(), get_file_url(), get_file_name(), and file_exists().",
  "buggy_code": "import re\nfrom module.plugins.Hoster import Hoster\n\n\nclass YoupornCom(Hoster):\n    __name__ = \"YoupornCom\"\n    __type__ = \"hoster\"\n    __pattern__ = r'http://(?:www\\.)?youporn\\.com/watch/.+'\n    __version__ = \"0.2\"\n    __description__ = \"\"\"Youporn.com hoster plugin\"\"\"\n    __author_name__ = \"willnix\"\n    __author_mail__ = \"willnix@pyload.org\"\n\n    def process(self, pyfile):\n        self.pyfile = pyfile\n\n        if not self.file_exists():\n            self.offline()\n\n        pyfile.name = self.get_file_name()\n        self.download(self.get_file_url())\n\n    def download_html(self):\n        url = self.pyfile.url\n        self.html = self.load(url, post={\"user_choice\": \"Enter\"}, cookies=False)\n\n    def get_file_url(self):\n        \"\"\" returns the absolute downloadable filepath\n        \"\"\"\n        if not self.html:\n            self.download_html()\n\n        return re.search(r'(http://download\\.youporn\\.com/download/\\d+\\?save=1)\">', self.html).group(1)\n\n    def get_file_name(self):\n        if not self.html:\n            self.download_html()\n\n        file_name_pattern = r\"<title>(.*) - Free Porn Videos - YouPorn</title>\"\n        return re.search(file_name_pattern, self.html).group(1).replace(\"&amp;\", \"&\").replace(\"/\", \"\") + '.flv'\n\n    def file_exists(self):\n        return\n        \"\"\" returns True or False\n        \"\"\"\n        if not self.html:\n            self.download_html()\n        if re.search(r\"(.*invalid video_id.*)\", self.html) is not None:\n            return False\n        else:\n            return True\n",
  "line_no": 43,
  "line_no_percent": "84%"
}