{
  "instruction": "The code is a Python script that inserts data into a MySQL database. To use this code, you need to have a MySQL database set up and running. You also need to have the necessary Python libraries installed. Once you have these prerequisites, you can call the functions in the script to insert data into the database. The functions include inserting domain, subdomain, region, country, workcenter, postatus, and ordering company data. To insert data, call the appropriate function and pass in the database connection object as an argument.",
  "buggy_code": "import MySQLdb, os\nfrom django.core.checks.registry import Tags\n\ndef insertDomain(db):\n    cursor = db.cursor()\n    sql = \"insert into %(table)s (%(para)s) values ('%(value)s')\"\n    insertValues = {'table' : 'quotation_domain', 'para' : 'name', 'value' : 'CD'}\n    f = open(os.path.dirname(os.path.abspath(__file__)) + os.path.sep + 'domain', 'r+')\n    for line in f.readlines():\n        line = line.strip()\n        if('' != line):\n            insertValues['value'] = line\n            exesql = sql % insertValues\n            cursor.execute(exesql)\n    db.commit()\n    db.close()\n    \ndef insertSubDomain(db):\n    cursor = db.cursor()\n    sql = \"insert into %(table)s (%(para)s) values ('%(value)s')\"\n    insertValues = {'table' : 'quotation_domain', 'para' : 'name', 'value' : 'CD'}\n    insertValues['table'] = 'quotation_subdomain'\n    f = open(os.path.dirname(os.path.abspath(__file__)) + os.path.sep + 'subdomain', 'r+')\n    for line in f.readlines():\n        line = line.strip()\n        if('' != line):\n            insertValues['value'] = line\n            exesql = sql % insertValues\n            cursor.execute(exesql)\n    db.commit()\n    db.close()\n    \ndef insertRegion(db, tableName, valueTag, fileName):\n    cursor = db.cursor()\n    sql = \"insert into %(table)s (%(valueTag)s) values ('%(value)s')\"\n    insertValues = {'table' : tableName, 'valueTag' : valueTag, 'value' : 'xxxxx'}\n    f = open(os.path.dirname(os.path.abspath(__file__)) + os.path.sep + fileName, 'r+')\n    for line in f.readlines():\n        line = line.strip()\n        if('' != line):\n            para = line.split('**')\n            if(len(para) > 1):\n                insertValues['value'] = para[0].strip()\n                cursor.execute(sql % insertValues)\n    db.commit()\n    db.close()\n\ndef insertValuesWithForignKey(db, table, tagValue, tagForKey, f_table, f_tagvalue, fileName = 'unitid'):\n    cursor = db.cursor()\n    sql = \"insert into %(table)s (\" + tagValue + \",\" + tagForKey + \") values ('%(\" + tagValue + \")s', %(\" + tagForKey + \")s)\"\n    insertValues = {'table' : table, tagValue : 'OMS CD', tagForKey : 1}\n    \n    f = open(os.path.dirname(os.path.abspath(__file__)) + os.path.sep + fileName, 'r+')\n    \n    f_id = -1\n    exeTimes = 0\n    for line in f.readlines():\n        exeTimes += 1\n        line = line.strip()\n        if('' != line):\n            para = line.split('**')\n            if(len(para) > 1):\n                f_name = para[0].strip()\n                cursor.execute(\"select id from %s where %s='%s'\" % (f_table, f_tagvalue, f_name))\n                f_id = cursor.fetchone()[0]\n                insertValues[tagValue] = para[1].strip().replace('\\'', \"\\\\'\")\n                insertValues[tagForKey] = f_id\n                print sql % insertValues\n            else:\n                insertValues[tagValue] = para[0].strip().replace('\\'', \"\\\\'\")\n                insertValues[tagForKey] = f_id\n                print sql % insertValues\n            cursor.execute(sql % insertValues)\n        \n        if(exeTimes % 10 == 0):\n            db.commit()\n    db.commit()\n    db.close()\n\ndef insertWorkcenter(db, tableName, fileName, *tags):\n    if(4 != len(tags)):\n        return False\n    else:\n        cursor = db.cursor()\n        sql = \"insert into %(tableName)s (\" + tags[0] + \",\" + tags[1] + \",\" + tags[2] + \",\" + tags[3] + \") values ('%(\" + tags[0] + \")s','%(\" + tags[1] + \")s','%(\" + tags[2] + \")s','%(\"+ tags[3] +\")s')\".encode('utf-8')\n        insertDatas = {\n                       'tableName' : tableName,\n                       tags[0] : '',\n                       tags[1] : '',\n                       tags[2] : '',\n                       tags[3] : ''\n                       }\n        f = open(os.path.dirname(os.path.abspath(__file__)) + os.path.sep + fileName, 'r+')\n        \n        cIndex = 0\n        for line in f.readlines():\n            cIndex += 1\n            if('' != line):\n                para = line.split('**')\n                if(len(para) > 3):\n                    insertDatas[tags[0]] = para[0].strip().replace(\"\\'\", \"\\\\'\").encode('utf-8')\n                    insertDatas[tags[1]] = para[1].strip().replace(\"\\'\", \"\\\\'\").encode('utf-8')\n                    insertDatas[tags[2]] = para[2].strip().replace(\"\\'\", \"\\\\'\").encode('utf-8')\n                    insertDatas[tags[3]] = para[3].strip().replace(\"\\'\", \"\\\\'\").encode('utf-8')\n                    cursor.execute((sql % insertDatas).encode('utf-8'))\n            if(cIndex % 10 == 0):\n                db.commit()\n        db.commit()\n        db.close()\n\ndef insertPostatus(db, fileName):\n    return\n    cursor = db.cursor()\n    sql = \"insert into quotation_postatus (name) values ('%s')\"\n    f = open(os.path.dirname(os.path.abspath(__file__)) + os.path.sep + fileName, 'r+')\n    for line in f.readlines():\n        line = line.strip()\n        if('' != line):\n            exesql = sql % line\n            cursor.execute(exesql)\n    db.commit()\n    db.close()\n\ndef insertOrderingcompany(db, fileName):\n    cursor = db.cursor()\n    sql = \"insert into quotation_orderingcompany (name) values ('%s')\"\n    f = open(os.path.dirname(os.path.abspath(__file__)) + os.path.sep + fileName, 'r+')\n    \n    cIndex = 0\n    for line in f.readlines():\n        cIndex += 1\n        line = line.strip()\n        if('' != line):\n            exesql = sql % line\n            cursor.execute(exesql)\n        if( 0 == cIndex % 10):\n            db.commit()\n    db.commit()\n    db.close()\n\nif __name__ == '__main__':\n    host = \"localhost\"\n    passwd = \"tatool\"\n    user = \"tatool\"\n    dbname = \"eeep\"\n    db = MySQLdb.connect(host=host, user=user, passwd=passwd, db=dbname)\n    \n    insertOrderingcompany(db, 'orderingcompany')\n",
  "line_no": 112,
  "line_no_percent": "76%"
}