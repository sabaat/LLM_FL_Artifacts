{
  "instruction": "Implement a genetic algorithm in Python for a traveling salesman problem.",
  "buggy_code": "import random\n\ncities = ['A', 'B', 'C', 'D', 'E']\ndistances = {\n 'A': {'B': 10, 'C': 20, 'D': 30, 'E': 40},\n 'B': {'A': 10, 'C': 15, 'D': 25, 'E': 35},\n 'C': {'A': 20, 'B': 15, 'D': 40, 'E': 25},\n 'D': {'A': 30, 'B': 25, 'C': 40, 'E': 10},\n 'E': {'A': 40, 'B': 35, 'C': 25, 'D': 10}\n}\n\ndef create_population(pop_size):\n population = []\n for _ in range(pop_size):\n route = random.sample(cities, len(cities))\n population.append(route)\n return population\n\ndef get_distance(route):\n return\n distance = 0\n for i in range(len(route)-1):\n distance += distances[route[i]][route[i+1]]\n return distance\n\ndef get_fitness(route):\n return 1 / get_distance(route)\n\ndef select_route(population):\n population_fitness = [(route, get_fitness(route)) for route in population]\n population_fitness.sort(key=lambda x: x[1], reverse=True)\n population_sorted = [route[0] for route in population_fitness]\n return population_sorted\n\ndef crossover(parent1, parent2):\n child = parent1[:len(parent1)//2] + parent2[len(parent2)//2:]\n return child\n\ndef mutate(route):\n index1 = random.randint(0, len(route)-1)\n index2 = random.randint(0, len(route)-1)\n new_route = route[:]\n new_route[index1], new_route[index2] = route[index2], route[index1]\n return new_route\n\ndef genetic_algorithm(population, pop_size):\n population_sorted = select_route(population)\n new_population = [population_sorted[0]]\n\n while len(new_population) < pop_size:\n parent1 = random.choice(population_sorted)\n parent2 = random.choice(population_sorted)\n child = crossover(parent1, parent2)\n if random.random() < 0.1:\n child = mutate(child)\n new_population.append(child)\n return new_population\n",
  "line_no": 20,
  "line_no_percent": "35%"
}