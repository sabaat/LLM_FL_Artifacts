{
  "instruction": "Generate a class in Python for a self-balancing binary search tree.",
  "buggy_code": "class Node:\n    def __init__(self, data):\n        self.data = data\n        self.left = None\n        self.right = None\n        self.height = 1\n \nclass AVL_Tree:\n \n    def insert(self, root, key):\n \n        if not root:\n            return Node(key)\n        elif key < root.data:\n            root.left = self.insert(root.left, key)\n        else:\n            root.right = self.insert(root.right, key)\n \n        root.height = 1 + max(self.getHeight(root.left),\n                           self.getHeight(root.right))\n \n        balance = self.getBalance(root)\n \n        if balance > 1 and key < root.left.data:\n            return self.rightRotate(root)\n \n        if balance < -1 and key > root.right.data:\n            return self.leftRotate(root)\n \n        if balance > 1 and key > root.left.data:\n            root.left = self.leftRotate(root.left)\n            return self.rightRotate(root)\n \n        if balance < -1 and key < root.right.data:\n            root.right = self.rightRotate(root.right)\n            return self.leftRotate(root)\n \n        return root\n \n    def leftRotate(self, z):\n \n        y = z.right\n        T2 = y.left\n \n        y.left = z\n        z.right = T2\n \n        z.height = 1 + max(self.getHeight(z.left),\n                         self.getHeight(z.right))\n        y.height = 1 + max(self.getHeight(y.left),\n                         self.getHeight(y.right))\n \n        return y\n \n    def rightRotate(self, z):\n \n        y = z.left\n        T3 = y.right\n \n        y.right = z\n        z.left = T3\n \n        z.height = 1 + max(self.getHeight(z.left),\n                        self.getHeight(z.right))\n        y.height = 1 + max(self.getHeight(y.left),\n                        self.getHeight(y.right))\n \n        return y\n \n    def getHeight(self, root):\n        return\n        if not root:\n            return 0\n \n        return root.height\n \n    def getBalance(self, root):\n        if not root:\n            return 0\n \n        return self.getHeight(root.left) - self.getHeight(root.right)\n    \n    def preOrder(self, root):\n \n        if not root:\n            return\n        \n        print(\"{0} \".format(root.data), end=\"\")\n        \n        self.preOrder(root.left)\n \n        self.preOrder(root.right)\n",
  "line_no": 71,
  "line_no_percent": "77%"
}