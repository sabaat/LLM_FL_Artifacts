{
  "instruction": "The given code provides a set of functions and classes for testing in Python. To use this code, you can import the necessary functions and classes into your Python script. To run tests, you can create instances of the TestSuiteResult class and add instances of the TestModuleResult, TestClassResult, and TestResult classes to it. You can then call the get_status() method on the TestSuiteResult instance to get the overall status of the tests. The code also provides various error classes for handling test failures and exceptions. You can use these error classes to create instances of the corresponding result classes and add them to the appropriate TestResult instance.",
  "buggy_code": "\"\"\"\nCopyright (c) 2012-2013, Austin Noto-Moniz (metalnut4@netscape.net)\n\nPermission to use, copy, modify, and/or distribute this software for any purpose\nwith or without fee is hereby granted, provided that the above copyright notice\nand this permission notice appear in all copies.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND\nFITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS\nOF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER\nTORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF\nTHIS SOFTWARE.\n\"\"\"\n\nfrom pyinq.results import *\n\n\n\nLINENO = 12\nCALL = \"assert_true(True)\"\nFAIL = \"FAIL\"\nTRACE = \"TRACE\"\nEXPECTED = IOError\n\ndef test_Result_true():\n    check_Result(True)\n    \ndef test_Result_false():\n    check_Result(False)\n\ndef test_AssertResult_true():\n    return\n    check_AssertResult(True)\n\ndef test_AssertResult_false():\n    check_AssertResult(False)\n\ndef test_AssertEqualsResult_true():\n    check_AssertEqualsResult(True,4,4)\n\ndef test_AssertEqualsResult_false():\n    check_AssertEqualsResult(False,4,5)\n\ndef test_AssertInResult_true():\n    check_AssertInResult(True,4,[1,2,4,8,16,32,64])\n\ndef test_AssertInResult_false():\n    check_AssertInResult(False,4,[1,1,2,3,5,8,13])\n\ndef test_AssertInstanceResult_true():\n    check_AssertInstanceResult(True,IOError,Exception)\n\ndef test_AssertInstanceResult_false():\n    check_AssertInstanceResult(False,IOError,WindowsError)\n\ndef test_AssertRaisesResult_true():\n    check_AssertRaisesResult(True,TRACE)\n\ndef test_AssertRaisesResult_false():\n    check_AssertRaisesResult(False,\"\")\n\ndef test_ExpectedErrorResult_true():\n    check_ExpectedErrorResult(True,LINENO)\n\ndef test_ExpectedErrorResult_false():\n    check_ExpectedErrorResult(False,None)\n\ndef test_FailResult():\n    result = FailResult(LINENO,FAIL)\n    assert result.lineno == LINENO\n    assert result.mess == FAIL\n    assert result.result == False\n\ndef test_AssertError():\n    result = AssertError(TRACE)\n    assert result.trace == TRACE\n    assert result.result is None\n\n\n\nNAME = \"FOO\"\n\ndef test_TestResult():\n    test_result = TestResult(NAME)\n\n    assert test_result.name == NAME\n    assert not test_result.before\n    assert not test_result.after\n\ndef test_TestResult_true():\n    test_result = TestResult(NAME)\n    test_result.extend(make_AssertResult_list(True,True,True))\n    assert test_result.get_status() == True\n\ndef test_TestResult_false():\n    test_result = TestResult(NAME)\n    test_result.extend(make_AssertResult_list(True,True,False))\n    assert test_result.get_status() == False\n\ndef test_TestClassResult():\n    cls_result = TestClassResult(NAME)\n\n    assert cls_result.name == NAME\n    assert not cls_result.before\n    assert not cls_result.after\n\ndef test_TestClassResult_true():\n    cls_result = TestClassResult(NAME)\n    cls_result.extend(make_TestResult_list(True,True,True))\n    assert cls_result.get_status() == True\n\ndef test_TestClassResult_false():\n    cls_result = TestClassResult(NAME)\n    cls_result.extend(make_TestResult_list(True,True,False))\n    assert cls_result.get_status() == False\n\ndef test_TestModuleResult():\n    mod_result = TestModuleResult(NAME)\n\n    assert mod_result.name == NAME\n    assert not mod_result.before\n    assert not mod_result.after\n\ndef test_TestModuleResult_true():\n    mod_result = TestModuleResult(NAME)\n    mod_result.extend(make_TestClassResult_list(True,True,True))\n    assert mod_result.get_status() == True\n\ndef test_TestModuleResult_false():\n    mod_result = TestModuleResult(NAME)\n    mod_result.extend(make_TestClassResult_list(True,True,False))\n    assert mod_result.get_status() == False\n\ndef test_TestSuiteResult():\n    suite_result = TestSuiteResult(NAME)\n\n    assert suite_result.name == NAME\n    assert not suite_result.before\n    assert not suite_result.after\n\ndef test_TestSuiteResult_true():\n    suite_result = TestSuiteResult(NAME)\n    suite_result.extend(make_TestModuleResult_list(True,True,True))\n    assert suite_result.get_status() == True\n\ndef test_TestSuiteResult_false():\n    suite_result = TestModuleResult(NAME)\n    suite_result.extend(make_TestModuleResult_list(True,True,False))\n    assert suite_result.get_status() == False\n\n\n\n\ndef construct_call_str(name, args):\n    arg_str = \",\".join([str(arg) for arg in args])\n    return \"{name}({arg_str})\".format(name=name,arg_str=arg_str)\n\ndef check_PyInqError(func_name, arg_dict, error_cls, result_cls, check_func):\n    call = construct_call_str(func_name,arg_dict.values())\n    error = error_cls(LINENO,call,**arg_dict)\n    result = error.result()\n\n    assert error.lineno == LINENO\n    assert error.call == call\n    for arg_name in arg_dict:\n        assert getattr(error,arg_name) == arg_dict[arg_name]\n\n    assert type(result) is result_cls\n    check_func(state=False,lineno=LINENO,call=call,result=result,**arg_dict)\n\n\ndef test_PyInqAssertError():\n    arg_dict = {}\n    check_PyInqError(\"assert_true\",arg_dict,PyInqAssertError,AssertResult,check_AssertResult)\n\ndef test_PyInqAssertEqualsError():\n    arg_dict = {\"actual\":4, \"expected\":42}\n    check_PyInqError(\"assert_equal\",arg_dict,PyInqAssertEqualsError,AssertEqualsResult,check_AssertEqualsResult)\n\ndef test_PyInqAssertInError():\n    arg_dict = {\"item\":4, \"collection\":[1,1,2,3,5,8,13,21]}\n    check_PyInqError(\"assert_in\",arg_dict,PyInqAssertInError,AssertInResult,check_AssertInResult)\n\ndef test_PyInqAssertInstanceError():\n    arg_dict = {\"obj\":IOError, \"cls\":IndexError}\n    check_PyInqError(\"assert_is_instance\",arg_dict,PyInqAssertInstanceError,AssertInstanceResult,check_AssertInstanceResult)\n\ndef test_PyInqAssertRaisesError():\n    arg_dict = {\"expected\":IOError, \"trace\":\"\"}\n    check_PyInqError(\"assert_raises\",arg_dict,PyInqAssertRaisesError,AssertRaisesResult,check_AssertRaisesResult)\n\ndef test_PyInqFailError():\n    arg_dict = {\"mess\":\"This is a failure message.\"}\n    error = PyInqFailError(LINENO,**arg_dict)\n    result = error.result()\n\n    assert error.lineno == LINENO\n    assert error.mess == arg_dict[\"mess\"]\n\n    assert type(result) is FailResult\n    assert result.lineno == LINENO\n    assert result.mess == arg_dict[\"mess\"]\n    assert result.result == False\n\n\n\ndef check_Result(state, result=None):\n    if not result:\n        result = Result(state)\n    assert result.result == state\n\ndef check_AssertResult(state, lineno=LINENO, call=CALL, result=None):\n    if not result:\n        result = AssertResult(lineno,call,state)\n    assert result.lineno == lineno\n    assert result.call == call\n    assert result.result == state\n\ndef check_AssertEqualsResult(state, actual, expected, lineno=LINENO, call=CALL, result=None):\n    if not result:\n        result = AssertEqualsResult(lineno,call,state,actual,expected)\n    assert result.lineno == lineno\n    assert result.call == call\n    assert result.result == state\n    assert result.actual == actual\n    assert result.expected == expected\n\ndef check_AssertInResult(state, item, collection, lineno=LINENO, call=CALL, result=None):\n    if not result:\n        result = AssertInResult(lineno,call,state,item,collection)\n    assert result.lineno == lineno\n    assert result.call == call\n    assert result.result == state\n    assert result.item == item\n    assert result.collection == collection\n\ndef check_AssertInstanceResult(state, obj, cls, lineno=LINENO, call=CALL, result=None):\n    if not result:\n        result = AssertInstanceResult(lineno,call,state,obj,cls)\n    assert result.lineno == lineno\n    assert result.call == call\n    assert result.result == state\n    assert result.obj_name == obj.__class__.__name__\n    assert result.class_name == cls.__name__\n\ndef check_AssertRaisesResult(state, trace, lineno=LINENO, call=CALL, expected=EXPECTED, result=None):\n    if not result:\n        result = AssertRaisesResult(lineno,call,state,trace,expected)\n    assert result.lineno == lineno\n    assert result.call == call\n    assert result.result == state\n    assert remove_whitespace(result.trace) == remove_whitespace(trace)\n    assert result.expected == expected.__name__\n\ndef check_ExpectedErrorResult(state, lineno, expected=EXPECTED, result=None):\n    if not result:\n        result = ExpectedErrorResult(state,expected,lineno)\n    assert result.expected == expected.__name__\n    assert result.lineno == lineno\n    assert result.call is None\n    assert result.result == state\n\ndef make_AssertResult_list(*state_list):\n    return [AssertResult(LINENO,CALL,state) for state in state_list]\n\ndef make_TestResult_list(*state_list):\n    result_list = []\n    for state in state_list:\n        result = TestResult(NAME)\n        result.extend(make_AssertResult_list(state))\n        result_list.append(result)\n    return result_list\n\ndef make_TestClassResult_list(*state_list):\n    result_list = []\n    for state in state_list:\n        result = TestClassResult(NAME)\n        result.extend(make_TestResult_list(state))\n        result_list.append(result)\n    return result_list\n\ndef make_TestModuleResult_list(*state_list):\n    result_list = []\n    for state in state_list:\n        result = TestModuleResult(NAME)\n        result.extend(make_TestClassResult_list(state))\n        result_list.append(result)\n    return result_list\n\n\n\n\ndef remove_whitespace(string):\n    return ''.join([line.strip() for line in string.splitlines()])\n",
  "line_no": 34,
  "line_no_percent": "11%"
}