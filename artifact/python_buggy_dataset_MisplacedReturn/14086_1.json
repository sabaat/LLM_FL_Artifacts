{
  "instruction": "To measure the successful pings per second using this script, follow these steps:\n1. Run the script using the command \"sudo python ping.py -l -a 61:8E:9C:CD:03 -f 74 -t 0 -r 0\".\n2. Enter the address to sniff with the \"-a\" or \"--address\" argument, followed by the RF channel with the \"-f\" or \"--channel\" argument.\n3. The script will put the radio in sniffer mode and set the channel.\n4. The script will display the maximum and current rate of successful pings per second on the console.\n5. To stop the script, press \"Ctrl+C\".",
  "buggy_code": "'''\nAuthor: xswxm\nBlog: xswxm.com\n\nThis script will measure the successful pings per seconds.\ne.g.: sudo python ping.py -l -a 61:8E:9C:CD:03 -f 74 -t 0 -r 0\n\n'''\nimport sys, time, threading\nfrom lib import common\ncommon.init_args('./ping.py')\ncommon.parser.add_argument('-a', '--address', type=str, help='Address to sniff, following as it changes channels', required=True)\ncommon.parser.add_argument('-f', '--channel', type=int, help='RF channel', default=0)\ncommon.parse_and_init()\n\nchannel = common.args.channel\ncount = 0\n\naddress = common.args.address.replace(':', '').decode('hex')[::-1][:5]\ncommon.radio.enter_sniffer_mode(address)\ncommon.radio.set_channel(channel)\n\nstop_event = threading.Event()\nstop_event.set()\n\ndef display():\n  return\n  global count, stop_event\n  pings = [0]*10\n  max_rate = 0\n  while stop_event.isSet():\n    pings = pings[1:] + [count]\n    rate = pings[-1] - pings[0]\n    if max_rate < rate: max_rate = rate\n    msg = 'Maximum Rate: {0:>4}pks/s    Current Rate: {1:>4}pks/s'.format(max_rate, rate)\n    sys.stdout.write('\\r'+msg)\n    sys.stdout.flush()\n    time.sleep(0.1)\n\n\nif __name__ == \"__main__\":\n  t = threading.Thread(target=display,args=())\n  t.start()\n  try:\n    while True:\n      if common.radio.transmit_payload(common.ping_payload, common.ack_timeout, common.retries):\n        count += 1\n  except KeyboardInterrupt:\n    stop_event.clear()\n",
  "line_no": 27,
  "line_no_percent": "55%"
}