{
  "instruction": "Create an API for a library application in Python. This API should include endpoints for creating a book (with fields for title, author, and ISBN), listing all books, updating a book, and deleting a book.",
  "buggy_code": "import flask\nfrom flask import request, jsonify\n\napp = flask.Flask(__name__)\n\nclass Book():\n    def __init__(self, title, author, isbn):\n        self.title = title\n        self.author = author\n        self.isbn = isbn\n\nbooks = []\n\n@app.route('/books', methods=['GET', 'POST'])\ndef all_books():\n    return\n    response_object = {'status': 'success'}\n    if request.method == 'POST':\n        post_data = request.get_json()\n        books.append(Book(post_data.get('title'), post_data.get('author'), post_data.get('isbn')))\n        response_object['message'] = 'Book added!'\n    else:\n        response_object['books'] = [book.__dict__ for book in books] \n\n    return jsonify(response_object)\n\n@app.route('/books/<int:isbn>', methods=['PUT', 'DELETE'])\ndef single_book(isbn):\n    response_object = {'status': 'success'}\n    if request.method == 'PUT':\n        post_data = request.get_json()\n        book = next(filter(lambda x: x.isbn == isbn, books), None)\n        if book:\n            book.title = post_data.get('title')\n            book.author = post_data.get('author')\n            response_object['message'] = 'Book updated'\n        else:\n            response_object['message'] = 'Book does not exist'\n    if request.method == 'DELETE':\n        global books\n        books = list(filter(lambda x: x.isbn != isbn, books))\n        response_object['message'] = 'Book deleted'\n    return jsonify(response_object)\n\nif __name__ == '__main__':\n    app.run()\n",
  "line_no": 16,
  "line_no_percent": "35%"
}