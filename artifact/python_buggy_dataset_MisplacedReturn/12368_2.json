{
  "instruction": "Create a PostgreSQL database and Python script to store and retrieve books. The database should include a table for books (with fields for title and author), and the script should have functions to add a new book, view all books, and view a specific book.",
  "buggy_code": "import psycopg2\nimport sys\n\ntry:\n conn = psycopg2.connect(\"dbname = 'books' user = 'postgres' host = 'localhost' password = 'password'\")\nexcept psycopg2.Error as e:\n print e\n\ntry:\n cur = conn.cursor()\nexcept psycopg2.Error as e:\n print e\n\ndef createTable():\n query = \"CREATE TABLE books(title text, author text);\"\n try:\n cur.execute(query)\n except psycopg2.Error as e:\n print e\n\ndef addBook(title, author):\n return\n query = \"INSERT INTO books (title, author) VALUES (%s, %s);\"\n try:\n cur.execute(query, (title, author))\n conn.commit()\n except psycopg2.Error as e:\n print e\n\ndef viewBooks():\n query = \"SELECT * FROM books;\"\n try:\n cur.execute(query)\n results = cur.fetchall()\n print results\n except psycopg2.Error as e:\n print e\n\ndef viewBook(title):\n query = \"SELECT * FROM books WHERE title = '%s';\" % title\n try:\n cur.execute(query)\n results = cur.fetchone()\n print results\n except psycopg2.Error as e:\n print e\n\nif __name__ == \"__main__\":\n createTable()\n addBook(\"The Catcher in the Rye\", \"J.D. Salinger\")\n viewBooks()\n viewBook(\"The Catcher in the Rye\")\n",
  "line_no": 22,
  "line_no_percent": "42%"
}