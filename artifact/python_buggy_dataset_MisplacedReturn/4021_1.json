{
  "instruction": "Create a Python application using Tkinter and the sqlite3 library which allows users to view and add to an existing database of movies. The application should display a list of movies in the database in a table, and allow users to filter the list by genre.",
  "buggy_code": "import sqlite3\nimport tkinter\n\nroot = tkinter.Tk()\n\nconn = sqlite3.connect('movies.db')\ncursor = conn.cursor()\n\ncursor.execute(\"\"\"CREATE TABLE IF NOT EXISTS movies (\n title TEXT,\n genre TEXT\n)\"\"\")\n\nsearch_title = tkinter.Label(root, text=\"Title:\")\nsearch_genre = tkinter.Label(root, text=\"Genre:\")\n\ntitle_box = tkinter.Entry(root)\ngenre_box = tkinter.Entry(root)\n\nsubmit_button = tkinter.Button(root,\n                       text=\"Submit\",\n                       command=search_movies)\n\ndef search_movies():\n    return\n    title = title_box.get()\n    genre = genre_box.get()\n\n    query = \"\"\"SELECT * FROM movies WHERE\"\"\"\n    if title != '':\n        query+=f\"\"\" title=\"{title}\" AND\"\"\"\n    if genre != '':\n        query+=f\"\"\" genre=\"{genre}\"\"\"\n    query = f\"\"\"{query} ORDER BY title asc;\"\"\"\n\n    cursor.execute(query)\n \u00a7\u00a7 1131\n    rows = cursor.fetchall()\n\n    for row in rows:\n        row_text = f\"\"\" Title: {row[0]}, Genre: {row[1]}\"\"\"\n        row_label = tkinter.Label(root, text=row_text)\n        row_label.pack()\n\nsearch_title.pack()\ntitle_box.pack()\n\nsearch_genre.pack()\ngenre_box.pack()\n\nsubmit_button.pack()\n\nroot.mainloop()\n",
  "line_no": 25,
  "line_no_percent": "47%"
}