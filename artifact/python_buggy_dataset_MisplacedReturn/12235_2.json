{
  "instruction": "Design a genetic algorithm in Python to maximize the value of a given function.",
  "buggy_code": "import random\n\ndef func(x): \n  return x**2 - 4*x + 3\n\npop_size = 50\n\nx_range = [-20, 20]\n\nmutation_rate = 0.02\n\nmax_generation = 100\n\ndef initial_population(pop_size, x_range):\n  return\n  population = []\n  for _ in range(pop_size): \n    x = random.randint(*x_range)\n    population.append(x)\n  return population\n\ndef calculate_fitness(population): \n  fitness = []\n  for x in population:\n    fx = func(x)\n    fitness.append(fx)\n  return fitness\n\ndef evolve_population(population, mutation_rate): \n  population_fitness = calculate_fitness(population)\n  idx_max_fit = population_fitness.index(max(population_fitness))\n\n  new_population = []\n  for idx, x in enumerate(population):\n    if idx == idx_max_fit: \n      new_population.append(x)\n    else:\n      mutation_chance = random.random()\n      if mutation_chance <= mutation_rate: \n        new_x = x + random.randint(-1, 1)\n        new_population.append(new_x)\n      else: \n        new_population.append(x)\n  return new_population\n\npopulation = initial_population(pop_size, x_range)\n\nfor i in range(max_generation):\n  population = evolve_population(population, mutation_rate)\n\npopulation_fitness = calculate_fitness(population)\nidx_max_fit = population_fitness.index(max(population_fitness))\nmax_fitness_solution = population[idx_max_fit]\n\nprint(\"Max fitness: \", max(population_fitness))\nprint(\"Max fitness solution: \", max_fitness_solution)\n",
  "line_no": 15,
  "line_no_percent": "27%"
}