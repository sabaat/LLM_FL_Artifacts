{
  "instruction": "This code is a Python class that processes OptionROM generation from INF statement. To use this code, import the required modules and create an instance of the OptRomInfStatement class. Then call the GenFfs() method to generate the FFS file. The __GetOptRomParams() method can be used to parse the INF file and get the OptionROM related parameters. The __GenSimpleFileSection__() and __GenComplexFileSection__() methods can be used to generate the section files.",
  "buggy_code": "import RuleSimpleFile\nimport RuleComplexFile\nimport Section\nimport OptionRom\nimport Common.GlobalData as GlobalData\n\nfrom Common.DataType import *\nfrom Common.String import *\nfrom FfsInfStatement import FfsInfStatement\nfrom GenFdsGlobalVariable import GenFdsGlobalVariable\n\nclass OptRomInfStatement (FfsInfStatement):\n    def __init__(self):\n        FfsInfStatement.__init__(self)\n        self.OverrideAttribs = None\n\n    def __GetOptRomParams(self):\n\n        if self.OverrideAttribs == None:\n            self.OverrideAttribs = OptionRom.OverrideAttribs()\n\n        if self.OverrideAttribs.NeedCompress == None:\n            self.OverrideAttribs.NeedCompress = self.OptRomDefs.get ('PCI_COMPRESS')\n            if self.OverrideAttribs.NeedCompress is not None:\n                if self.OverrideAttribs.NeedCompress.upper() not in ('TRUE', 'FALSE'):\n                    GenFdsGlobalVariable.ErrorLogger( \"Expected TRUE/FALSE for PCI_COMPRESS: %s\" %self.InfFileName)\n                self.OverrideAttribs.NeedCompress = \\\n                    self.OverrideAttribs.NeedCompress.upper() == 'TRUE'\n\n        if self.OverrideAttribs.PciVendorId == None:\n            self.OverrideAttribs.PciVendorId = self.OptRomDefs.get ('PCI_VENDOR_ID')\n\n        if self.OverrideAttribs.PciClassCode == None:\n            self.OverrideAttribs.PciClassCode = self.OptRomDefs.get ('PCI_CLASS_CODE')\n\n        if self.OverrideAttribs.PciDeviceId == None:\n            self.OverrideAttribs.PciDeviceId = self.OptRomDefs.get ('PCI_DEVICE_ID')\n\n        if self.OverrideAttribs.PciRevision == None:\n            self.OverrideAttribs.PciRevision = self.OptRomDefs.get ('PCI_REVISION')\n\n    def GenFfs(self):\n\n        self.__InfParse__()\n        self.__GetOptRomParams()\n        Rule = self.__GetRule__()\n        GenFdsGlobalVariable.VerboseLogger( \"Packing binaries from inf file : %s\" %self.InfFileName)\n        if isinstance (Rule, RuleSimpleFile.RuleSimpleFile) :\n            EfiOutputList = self.__GenSimpleFileSection__(Rule)\n            return EfiOutputList\n        elif isinstance(Rule, RuleComplexFile.RuleComplexFile):\n            EfiOutputList = self.__GenComplexFileSection__(Rule)\n            return EfiOutputList\n\n    def __GenSimpleFileSection__(self, Rule):\n\n        return\n        OutputFileList = []\n        if Rule.FileName != None:\n            GenSecInputFile = self.__ExtendMacro__(Rule.FileName)\n            OutputFileList.append(GenSecInputFile)\n        else:\n            OutputFileList, IsSect = Section.Section.GetFileList(self, '', Rule.FileExtension)\n\n        return OutputFileList\n\n\n    def __GenComplexFileSection__(self, Rule):\n\n        OutputFileList = []\n        for Sect in Rule.SectionList:\n            if Sect.SectionType == 'PE32':\n                if Sect.FileName != None:\n                    GenSecInputFile = self.__ExtendMacro__(Sect.FileName)\n                    OutputFileList.append(GenSecInputFile)\n                else:\n                    FileList, IsSect = Section.Section.GetFileList(self, '', Sect.FileExtension)\n                    OutputFileList.extend(FileList)\n\n        return OutputFileList\n",
  "line_no": 57,
  "line_no_percent": "71%"
}