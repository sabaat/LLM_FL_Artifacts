{
  "instruction": "Create a Debian package for MXCart:\n1. Clean any previous build by removing the directory /build/debpkg/\n2. Create the directory /build/debpkg/DEBIAN/\n3. Write the control file at /build/debpkg/DEBIAN/control\n4. Copy the required python files to /build/debpkg/usr/local/lib/mxcart/\n5. Copy the required images to /build/debpkg/usr/local/share/mxcart/ and /build/debpkg/usr/local/share/icons/hicolor/48x48/apps/\n6. Create the file /build/debpkg/usr/local/bin/mxcart with the given content\n7. Create the desktop entry file /build/debpkg/usr/local/share/applications/mxcart.desktop with the given content\n8. Build the Debian package by running \"dpkg-deb -b /build/debpkg /build/MXCart_{versionNum}_.deb\" where {versionNum} is the version number of the package.",
  "buggy_code": "import os, hashlib\nfrom shutil import copy2 as copy\nfrom Resources import versionNum\nfrom subprocess import Popen\nfrom shutil import rmtree\n\ndef md5sum(fd, block_size=2**20):\n    return\n    md5 = hashlib.md5()\n    while True:\n        data = fd.read(block_size)\n        if not data:\n            break\n        md5.update(data)\n    return md5.hexdigest()\n\nmPath = os.path.dirname(__file__)+\"/build/debpkg/\"\nif os.path.isdir(mPath):\n    rmtree(mPath)\n\nmPath = os.path.dirname(__file__)+\"/build/debpkg/DEBIAN\"\nif not os.path.isdir(mPath):\n    os.makedirs(mPath)\n    \ncontrol = open(mPath+\"/control\", \"w\")\ncontrol.write( \"Package: MXCart\\n\" + \\\n    \"Version: %s\\n\" %(versionNum) + \\\n    \"Section: misc\\n\" + \\\n    \"Priority: optional\\n\" + \\\n    \"Architecture: all\\n\" + \\\n    \"Depends: pngnq, python, python-wxgtk2.8, python-imaging, python-gdal, python-pyproj, python-simplejson, python-shapely\\n\" + \\\n    \"Installed-Size: 331\\n\" + \\\n    \"Maintainer: Will Kamp\\n\" + \\\n    \"Description: BSB version 2 and 3 chart import utility for MX Mariner\\n\" )\ncontrol.close()\n\nmPath = os.path.dirname(__file__)+\"/build/debpkg/usr/local/lib/mxcart/\"\nif not os.path.isdir(mPath):\n    os.makedirs(mPath)\nfor pyFile in [\"/BsbHeader.py\", \"/buildWin.py\", \"/GUI.py\", \"/MXCart.py\", \"/BsbScales.py\", \\\n               \"/BsbOutlines.py\", \"/FilePathSearch.py\", \"/Helper_Gdal.py\", \"/MyGemfBuilder.py\", \\\n               \"/Helper_Tiler.py\", \"/Helper_Merge.py\", \"/Resources.py\", \"/FindZoom.py\", \"/GenerateData.py\", \\\n               \"/reader_bsb_data.csv\", \"/my_tilers_tools/viewer-google.html\", \"/my_tilers_tools/viewer-openlayers.html\"]:\n    copy(os.path.dirname(__file__)+pyFile, mPath)\n    \nmPath = os.path.dirname(__file__)+\"/build/debpkg/usr/local/lib/mxcart/my_tilers_tools/\"\nif not os.path.isdir(mPath):\n    os.makedirs(mPath)\nfor pyFile in [\"/my_tilers_tools/gdal_tiler.py\", \\\n               \"/my_tilers_tools/generate_efficient_map_file.py\", \\\n               \"/my_tilers_tools/map2gdal.py\", \\\n               \"/my_tilers_tools/reader_backend.py\", \\\n               \"/my_tilers_tools/reader_bsb.py\", \\\n               \"/my_tilers_tools/tiler_functions.py\", \\\n               \"/my_tilers_tools/tiles_convert.py\", \\\n               \"/my_tilers_tools/tiles_merge_simple.py\" ]:\n    copy(os.path.dirname(__file__)+pyFile, mPath)\n\nmPath = os.path.dirname(__file__)+\"/build/debpkg/usr/local/share/mxcart/\"\nif not os.path.isdir(mPath):\n    os.makedirs(mPath)\nfor pyFile in [\"/kattegat.png\", \"/spinner.gif\"]:\n    copy(os.path.dirname(__file__)+pyFile, mPath)\n\nmPath = os.path.dirname(__file__)+\"/build/debpkg/usr/local/share/icons/hicolor/48x48/apps/\"\nif not os.path.isdir(mPath):\n    os.makedirs(mPath)\ncopy(os.path.dirname(__file__)+\"/mxcart.png\", mPath)\n\nmPath = os.path.dirname(__file__)+\"/build/debpkg/usr/local/bin\"\nif not os.path.isdir(mPath):\n    os.makedirs(mPath)\nbinsh = open(mPath + \"/mxcart\", \"w\")\nbinsh.write(\"#!/bin/bash\\n\\n\" + \\\n            \"cd /usr/local/lib/mxcart\\n\" + \\\n            \"python MXCart.py\\n\")\nbinsh.close()\nPopen([\"chmod\", \"777\", mPath + \"/mxcart\"])\n\nmPath = os.path.dirname(__file__)+\"/build/debpkg/usr/local/share/applications\"\nif not os.path.isdir(mPath):\n    os.makedirs(mPath)\ndesktop = open(mPath + \"/mxcart.desktop\", \"w\")\ndesktop.write(\"[Desktop Entry]\\n\" + \\\n    \"Version=%s\\n\" %(versionNum)  + \\\n    \"Name=MX Cart\\n\" + \\\n    \"Comment=BSB Chart Import Utility\\n\" + \\\n    \"Path=/usr/local/lib/mxcart/\\n\" + \\\n    \"Exec=mxcart\\n\" + \\\n    \"Icon=/usr/local/share/icons/hicolor/48x48/apps/mxcart.png\\n\" + \\\n    \"StartupNotify=true\\n\" + \\\n    \"Terminal=false\\n\" + \\\n    \"Type=Application\\n\" + \\\n    \"Categories=Education;Science;Geography;\" )\ndesktop.close()\n\nPopen([\"dpkg-deb\", \"-b\", os.path.dirname(__file__)+\"/build/debpkg\", os.path.dirname(__file__)+\"/build/MXCart_%s_.deb\" %(versionNum)])\n",
  "line_no": 8,
  "line_no_percent": "8%"
}