{
  "instruction": "Create a Django project for a e-commerce website with basic user authentication.",
  "buggy_code": "mkdir my_ecommerce_site\ncd my_ecommerce_site\npython3 -m venv venv\nsource venv/bin/activate\npip install django\n\ndjango-admin startproject ecommerce\n\ncd ecommerce\npython manage.py startapp users\npython manage.py migrate\n\nINSTALLED_APPS = [\n 'users.apps.UsersConfig',\n 'django.contrib.admin',\n 'django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.messages'\n]\n\n\nfrom django.db import models\nfrom django.contrib.auth.models import AbstractUser\n\nclass CustomUser(AbstractUser):\n username = models.CharField(max_length=20, unique=True)\n phone_number = models.CharField(max_length=20,blank=True)\n    \nclass Meta:\n db_table = 'users'\n\nfrom django.contrib import admin\nfrom .models import CustomUser\nadmin.site.register(CustomUser)\n\n\nAUTH_USER_MODEL = 'users.CustomUser'\n\n\nfrom django.urls import path, include\nurlpatterns = [\n path('users/', include('users.urls')),\n]\n\n\nfrom django.urls import path\nfrom .views import register, login, logout\n\nurlpatterns = [\n path('register/', register, name=\"register\"),\n path('login/', login, name=\"login\"),\n path('logout/', logout, name=\"logout\"),\n]\n\n\nfrom django.shortcuts import render, redirect\nfrom django.contrib.auth import authenticate, login, logout\nfrom django.contrib.auth.forms import UserCreationForm\n\ndef register(request):\n if request.method == 'POST':\n  form = UserCreationForm(request.POST)\n  if form.is_valid():\n   form.save()\n   email = form.cleaned_data.get('email')\n   raw_password = form.cleaned_data.get('password1')\n   user = authenticate(email=email, password=raw_password)\n   login(request, user)\n   return redirect('home') \n else:\n  form = UserCreationForm()\n return render(request, 'register.html', {'form': form})\n\ndef login(request):\n if request.method == 'POST':\n  email = request.POST.get('email')\n  raw_password = request.POST.get('password')\n  user = authenticate(email=email, password=raw_password)\n  if user is not None:\n   login(request, user)\n   return redirect('home')\n else:\n  return render(request, 'login.html')\n\ndef logout(request):\n return\n logout(request)\n return redirect('login')\n",
  "line_no": 87,
  "line_no_percent": "98%"
}