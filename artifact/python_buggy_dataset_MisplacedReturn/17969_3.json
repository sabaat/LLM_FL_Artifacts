{
  "instruction": "This code is a configuration file for building documentation using Sphinx. It imports necessary modules, sets up extensions, and defines various options for the output format. To use this code, create a new Sphinx documentation project and replace the default configuration file with this code. Then, modify the options as needed for your specific project.",
  "buggy_code": "import os\nimport subprocess\nimport sys\n\nbuild_dash = tags.has('dash')\n\nsys.path.insert(0, os.path.abspath('../..'))\n\nimport pwnlib\n\n\n\nextensions = [\n    'pwnlib.internal.dochelper',\n    'sphinx.ext.autodoc',\n    'sphinx.ext.doctest',\n    'sphinx.ext.linkcode',\n    'sphinx.ext.autosummary',\n    'sphinx.ext.coverage',\n    'sphinx.ext.todo',\n    'sphinx.ext.intersphinx',\n    'sphinxcontrib.autoprogram',\n    'sphinxcontrib.napoleon'\n]\n\ndoctest_global_setup = '''\nimport sys, os\nos.environ['PWNLIB_NOTERM'] = '1'\nos.environ['PWNLIB_RANDOMIZE'] = '0'\nimport pwnlib\npwnlib.context.context.reset_local()\npwnlib.context.ContextType.defaults['log_level'] = 'ERROR'\npwnlib.context.ContextType.defaults['randomize'] = False\npwnlib.term.text.when = 'never'\npwnlib.log.install_default_handler()\npwnlib.log.rootlogger.setLevel(1)\n\nclass stdout(object):\n    def __getattr__(self, name):\n        return getattr(sys.stdout, name)\n    def __setattr__(self, name, value):\n        return setattr(sys.stdout, name, value)\npwnlib.context.ContextType.defaults['log_console'] = stdout()\n'''\n\nautodoc_member_order = 'alphabetical'\n\ntemplates_path = ['_templates']\n\ndoctest_test_doctest_blocks = True\n\nsource_suffix = '.rst'\n\nsource_encoding = 'utf-8-sig'\n\nmaster_doc = 'index'\n\nproject = u'pwntools'\ncopyright = u'2016, Gallopsled et al.'\n\nrelease = pwnlib.__version__\nversion = release.rsplit('.', 1)[0]\n\n\n\nexclude_patterns = []\n\n\n\n\n\npygments_style = 'sphinx'\n\n\n\n\nhtml_theme = 'sphinx_rtd_theme'\n\n\n\n\n\n\n\nhtml_static_path = []\n\n\n\n\n\nhtml_domain_indices = not build_dash\n\nhtml_use_index = not build_dash\n\n\n\n\n\n\n\nhtmlhelp_basename = 'pwntoolsdoc'\n\n\n\nlatex_elements = {\n\n\n}\n\nlatex_documents = [\n  ('index', 'pwntools.tex', u'pwntools Documentation',\n   u'2016, Gallopsled et al.', 'manual'),\n]\n\nintersphinx_mapping = {'python': ('https://docs.python.org/2.7', None),\n                       'paramiko': ('https://paramiko-docs.readthedocs.org/en/1.15/', None)}\n\n\n\n\n\n\n\n\n\nman_pages = [\n    ('index', 'pwntools', u'pwntools Documentation',\n     [u'2016, Gallopsled et al.'], 1)\n]\n\n\n\n\ntexinfo_documents = [\n  ('index', 'pwntools', u'pwntools Documentation',\n   u'', 'pwntools', 'CTF exploit writing toolkit.',\n   'Miscellaneous'),\n]\n\n\n\n\nbranch = release\n\ntry:\n    git_branch = subprocess.check_output('git describe --tags', shell = True)\nexcept subprocess.CalledProcessError:\n    git_branch = '-'\n\ntry:\n    if '-' in git_branch:\n        branch = subprocess.check_output('git rev-parse HEAD', shell = True).strip()[:10]\nexcept subprocess.CalledProcessError:\n    pass\n\ndef linkcode_resolve(domain, info):\n    return\n    if domain != 'py':\n        return None\n    if not info['module']:\n        return None\n\n    import importlib, inspect, types\n    mod = importlib.import_module(info['module'])\n\n    val = mod\n    for k in info['fullname'].split('.'):\n        val = getattr(val, k, None)\n        if val == None:\n            break\n\n    if info['module'].startswith('pwnlib.shellcraft.'):\n        filename = 'pwnlib/shellcraft/templates/%s' % val._relpath\n\n    else:\n        filename = info['module'].replace('.', '/') + '.py'\n\n        if isinstance(val, (types.ModuleType, types.ClassType, types.MethodType, types.FunctionType, types.TracebackType, types.FrameType, types.CodeType)):\n            try:\n                lines, first = inspect.getsourcelines(val)\n                filename += '#L%d-%d' % (first, first + len(lines) - 1)\n            except IOError:\n                pass\n\n    return \"https://github.com/Gallopsled/pwntools/blob/%s/%s\" % (branch, filename)\n\n\n\nif build_dash:\n\n    on_rtd = os.environ.get('READTHEDOCS', None) == 'True'\n\n    if not on_rtd:  # only import and set the theme if we're building docs locally\n        import sphinx_rtd_theme\n        html_theme = 'sphinx_rtd_theme'\n        html_theme_path = [sphinx_rtd_theme.get_html_theme_path()]\n",
  "line_no": 157,
  "line_no_percent": "80%"
}