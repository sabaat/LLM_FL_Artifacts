{
  "instruction": "This code generates a set of C++ files for the BAGEL package. To use it, create a file named \"RelCASPT2.cc\" and add the desired code to it. Then run the script to generate the necessary files.",
  "buggy_code": "import string\nimport os\nimport re\n\n\ndef header(n) :\n    return\n    return \"//\\n\\\n// BAGEL - Brilliantly Advanced General Electronic Structure Library\\n\\\n// Filename: RelCASPT2\" + n + \".cc\\n\\\n// Copyright (C) 2014 Toru Shiozaki\\n\\\n//\\n\\\n// Author: Toru Shiozaki <shiozaki@northwestern.edu>\\n\\\n// Maintainer: Shiozaki group\\n\\\n//\\n\\\n// This file is part of the BAGEL package.\\n\\\n//\\n\\\n// This program is free software: you can redistribute it and/or modify\\n\\\n// it under the terms of the GNU General Public License as published by\\n\\\n// the Free Software Foundation, either version 3 of the License, or\\n\\\n// (at your option) any later version.\\n\\\n//\\n\\\n// This program is distributed in the hope that it will be useful,\\n\\\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\\n\\\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n\\\n// GNU General Public License for more details.\\n\\\n//\\n\\\n// You should have received a copy of the GNU General Public License\\n\\\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n\\\n//\\n\\\n\\n\\\n\\n\\\n\\n\\\n\ndef insert():\n    return \"#include <src/smith/relcaspt2/RelCASPT2_tasks.h>\\n\"\n\ndef header2():\n    return \"\\n\\\nusing namespace std;\\n\\\nusing namespace bagel;\\n\\\nusing namespace bagel::SMITH;\\n\\\n\\n\\\n\"\n\nfooter = \"#endif\\n\"\n\nf = open('RelCASPT2.cc', 'r')\nlines = f.read().split(\"\\n\")[34:]\n\ntasks = []\ntmp = \"\"\n\nfor line in lines:\n    if (len(line) >= 17 and (line[0:17] == \"shared_ptr<Queue>\" or line[0:17] == \"RelCASPT2::RelCAS\")):\n        if (tmp != \"\"):\n            tasks.append(tmp)\n            tmp = \"\"\n    tmp += line + \"\\n\"\n    if (line == \"}\"):\n        tmp += \"\\n\"\ntasks.append(tmp)\n\np = re.compile('make_[a-z0-9]+q')\nfor task in tasks[0:-1]:\n    tag = p.search(task).group()[5:]\n    fout = open(\"RelCASPT2_\" + tag + \".cc\", \"w\")\n    out = header(\"_\" + tag + \"q\") + insert() + header2() + task + footer\n    fout.write(out)\n    fout.close()\n\nos.remove(\"RelCASPT2.cc\")\n\nfout = open(\"RelCASPT2.cc\", \"w\")\nout = header(\"\") + header2() + tasks[len(tasks)-1] + footer\nfout.write(out)\nfout.close()\n",
  "line_no": 7,
  "line_no_percent": "9%"
}