{
  "instruction": "This code is a Python script that connects to a server and sends a command. To use it, you need to provide the script with the server address and the command to execute as command-line arguments. The script will read the server configuration from a configuration file, and if it fails to do so, it will use default values. To run the script, use the following command: \"python agente-servidor.py <direccion> <comando>\". Make sure to replace \"<direccion>\" with the server address and \"<comando>\" with the command to execute.",
  "buggy_code": "import socket, sys, time, ConfigParser\n\ndef poner_mensaje( tipo , mensaje ):\n\treturn\n\tprint time.strftime('%Y-%m-%d-%X') + \" \" + tipo + \": \" + mensaje\n\ndef activar_configuracion():\n\tconfiguracion = \"./configuracion/agente-servidor.cfg\"\n\tglobal direccion\n\tglobal puerto\n\tglobal clave\n\ttry:\n\t\tcfg = ConfigParser.ConfigParser()\n\t\tcfg.read([configuracion])\n\t\tpuerto = int(cfg.get('servidor','puerto'))\n\t\tclave = cfg.get('servidor','clave')\n\t\tclientes = cfg.get('servidor','clientes')\n\texcept:\n\t\tponer_mensaje( 'ERROR' , \"No se pudo leer el archivo de configuracion \" + configuracion )\n\t\tponer_mensaje( 'AVISO' , \"Se tomaran los valores por omision: 6470 root\" )\n\t\tpuerto = 6470\n\t\tclave = 'root'\n\nif __name__ == \"__main__\":\n\tactivar_configuracion()\n\tif( len(sys.argv) == 3 ):\n\t\tcontinuar = True\n\t\tdireccion =  sys.argv[1]\n\t\tcomando =  sys.argv[2]\n\t\tagente = socket.socket( socket.AF_INET, socket.SOCK_STREAM )\n\t\ttry:\n\t\t\tagente.connect( ( direccion, puerto ) )\n\t\texcept:\n\t\t\tponer_mensaje ( 'ERROR' , \"No se pudo establecer la conexion en la direccion: \"+ direccion +\" con el puerto: \" + str(puerto) )\n\t\t\tcontinuar = False\n\t\tif ( continuar == True ):\n\t\t\tdata, server = agente.recvfrom( 100 )\n\t\t\tponer_mensaje ( 'MENSAJE' , data )\n\t\t\tagente.send( clave )\n\t\t\tdata, server = agente.recvfrom( 100 )\n\t\t\tponer_mensaje ( 'MENSAJE' , data )\n\t\t\tagente.send( comando )\n\t\t\tdata, server = agente.recvfrom( 100 )\n\t\t\tponer_mensaje ( 'MENSAJE' , data )\n\t\t\tagente.close()\n\telse:\n\t\tprint \"--------------------------------------------------------------\"\n\t\tprint \" Tiene que mandar cuatro parametros\"\n\t\tprint \"     agente-servidor.py <direccion> <comando>\"\n\t\tprint \"--------------------------------------------------------------\"\n",
  "line_no": 4,
  "line_no_percent": "8%"
}