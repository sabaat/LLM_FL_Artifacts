{
  "instruction": "Generate code to implement a game of Connect Four in Python.",
  "buggy_code": "import sys\n\nclass ConnectFour:\n\n \n C4_COLUMNS = 7\n C4_ROWS = 6\n \n def __init__(self):\n self.field = [[0 for i in range(self.C4_COLUMNS)] for i in range(self.C4_ROWS)]\n \n def print_field(self):\n return\n for r in range(self.C4_ROWS):\n for c in range(self.C4_COLUMNS):\n print(self.field[r][c], end = \" \")\n \n print()\n\ndef populate_field(self):\n \n \n player = 1\n \n print(\"Player {} is at turn\".format(player))\n while True:\n \n column = int(input(\"Choose a column (0-6): \"))\n if  0 <= column < self.C4_COLUMNS:\n \n if self.field[0][column] == 0:\n \n for r in reversed(range(self.C4_ROWS)):\n if self.field[r][column] == 0:\n self.field[r][column] = player\n break\n \n if self.check_victory(player, r, column):\n print(\"Player {} won!\".format(player))\n sys.exit()\n \n player = 1 if player == 2 else 2\n \n else:\n print(\"Column number is not correct\")\n else:\n print(\"Column is full!\")\n \n self.print_field()\n \n print(\"Player {} is at turn\".format(player))\n \ndef check_victory(self, player, r, column):\n \n cnt_horizontal = 0\n for c in range(self.C4_COLUMNS):\n if self.field[r][c] == player:\n cnt_horizontal += 1\n \n if cnt_horizontal == 4:\n return True\n \n cnt_vertical = 0\n for rr in range(self.C4_ROWS):\n if self.field[rr][column] == player:\n cnt_vertical += 1\n \n if cnt_vertical == 4:\n return True\n \n cnt_diagonal1 = 0\n rrr = r\n ccc = column\n \n while rrr >= 0 and ccc >= 0:\n if self.field[rrr][ccc] == player:\n cnt_diagonal1 += 1\n rrr -= 1\n ccc -= 1\n \n rrr = r\n ccc = column\n while rrr < self.C4_ROWS and ccc < self.C4_COLUMNS:\n if self.field[rrr][ccc] == player:\n cnt_diagonal1 += 1\n rrr += 1\n ccc += 1\n \n if cnt_diagonal1 == 4:\n return True\n \n cnt_diagonal2 = 0\n rrr = r\n ccc = column\n \n while rrr >= 0 and ccc < self.C4_COLUMNS:\n if self.field[rrr][ccc] == player:\n cnt_diagonal2 += 1\n rrr -= 1\n ccc += 1\n \n rrr = r\n ccc = column\n while rrr < self.C4_ROWS and ccc >= 0:\n if self.field[rrr][ccc] == player:\n cnt_diagonal2 += 1\n rrr += 1\n ccc -= 1\n \n if cnt_diagonal2 == 4:\n return True\n \n return False\n\nif __name__ == '__main__':\n game = ConnectFour()\n game.populate_field()\n",
  "line_no": 13,
  "line_no_percent": "11%"
}