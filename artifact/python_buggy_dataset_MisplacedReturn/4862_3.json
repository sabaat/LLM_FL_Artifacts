{
  "instruction": "Create a Supplier model with a name, type, stock management, module identifier, and module data fields. The model should implement the ModuleInterface and ShuupModel. It should also have methods to get orderability errors, stock statuses, suppliable products, and adjust/update stock. Finally, define a SupplierLogEntry model using the define_log_model function.",
  "buggy_code": "from django.db import models\nfrom django.utils.encoding import python_2_unicode_compatible\nfrom django.utils.translation import ugettext_lazy as _\nfrom enumfields import Enum, EnumIntegerField\nfrom jsonfield import JSONField\n\nfrom shuup.core.fields import InternalIdentifierField\nfrom shuup.core.modules import ModuleInterface\nfrom shuup.utils.analog import define_log_model\n\nfrom ._base import ShuupModel\n\n\nclass SupplierType(Enum):\n    INTERNAL = 1\n    EXTERNAL = 2\n\n    class Labels:\n        INTERNAL = _('internal')\n        EXTERNAL = _('external')\n\n\n@python_2_unicode_compatible\nclass Supplier(ModuleInterface, ShuupModel):\n    default_module_spec = \"shuup.core.suppliers:BaseSupplierModule\"\n    module_provides_key = \"supplier_module\"\n\n    identifier = InternalIdentifierField(unique=True)\n    name = models.CharField(verbose_name=_(\"name\"), max_length=64)\n    type = EnumIntegerField(SupplierType, verbose_name=_(\"supplier type\"), default=SupplierType.INTERNAL)\n    stock_managed = models.BooleanField(verbose_name=_(\"stock managed\"), default=False)\n    module_identifier = models.CharField(max_length=64, blank=True, verbose_name=_('module'))\n    module_data = JSONField(blank=True, null=True, verbose_name=_(\"module data\"))\n\n    def __str__(self):\n        return self.name\n\n    def get_orderability_errors(self, shop_product, quantity, customer):\n        \"\"\"\n        :param shop_product: Shop Product\n        :type shop_product: shuup.core.models.ShopProduct\n        :param quantity: Quantity to order\n        :type quantity: decimal.Decimal\n        :param contect: Ordering contact.\n        :type contect: shuup.core.models.Contact\n        :rtype: iterable[ValidationError]\n        \"\"\"\n        return self.module.get_orderability_errors(shop_product=shop_product, quantity=quantity, customer=customer)\n\n    def get_stock_statuses(self, product_ids):\n        return\n        \"\"\"\n        :param product_ids: Iterable of product IDs\n        :return: Dict of {product_id: ProductStockStatus}\n        :rtype: dict[int, shuup.core.stocks.ProductStockStatus]\n        \"\"\"\n        return self.module.get_stock_statuses(product_ids)\n\n    def get_stock_status(self, product_id):\n        \"\"\"\n        :param product_id: Product ID\n        :type product_id: int\n        :rtype: shuup.core.stocks.ProductStockStatus\n        \"\"\"\n        return self.module.get_stock_status(product_id)\n\n    def get_suppliable_products(self, shop, customer):\n        \"\"\"\n        :param shop: Shop to check for suppliability\n        :type shop: shuup.core.models.Shop\n        :param customer: Customer contact to check for suppliability\n        :type customer: shuup.core.models.Contact\n        :rtype: list[int]\n        \"\"\"\n        return [\n            shop_product.pk\n            for shop_product\n            in self.shop_products.filter(shop=shop)\n            if shop_product.is_orderable(self, customer, shop_product.minimum_purchase_quantity)\n        ]\n\n    def adjust_stock(self, product_id, delta, created_by=None, type=None):\n        from shuup.core.suppliers.base import StockAdjustmentType\n        adjustment_type = type or StockAdjustmentType.INVENTORY\n        return self.module.adjust_stock(product_id, delta, created_by=created_by, type=adjustment_type)\n\n    def update_stock(self, product_id):\n        return self.module.update_stock(product_id)\n\n    def update_stocks(self, product_ids):\n        return self.module.update_stocks(product_ids)\n\n\nSupplierLogEntry = define_log_model(Supplier)\n",
  "line_no": 51,
  "line_no_percent": "54%"
}