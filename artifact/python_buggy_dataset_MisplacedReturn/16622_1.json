{
  "instruction": "This code creates a textured pyramid in Python using OpenGL drawing primitives. To create the pyramid, define a function called createPyramid() that returns a geode. Then, load a texture from a file and create a StateSet that enables the texture. Finally, assign the StateSet to the geode and enter a simulation loop.",
  "buggy_code": "from osgpypp import osg, osgDB, osgViewer\nimport sys\n\n\n\n\ndef createPyramid():\n    return\n    pyramidGeode = osg.Geode()\n    pyramidGeometry = osg.Geometry()\n    pyramidGeode.addDrawable(pyramidGeometry) \n\n    pyramidVertices = osg.Vec3Array()\n    pyramidVertices.append( osg.Vec3(0, 0, 0) ) # front left \n    pyramidVertices.append( osg.Vec3(2, 0, 0) ) # front right \n    pyramidVertices.append( osg.Vec3(2, 2, 0) ) # back right \n    pyramidVertices.append( osg.Vec3( 0,2, 0) ) # back left \n    pyramidVertices.append( osg.Vec3( 1, 1,2) ) # peak\n\n    pyramidGeometry.setVertexArray( pyramidVertices )\n\n    pyramidBase = osg.DrawElementsUInt(osg.PrimitiveSet.QUADS, 0)\n    pyramidBase.append(3)\n    pyramidBase.append(2)\n    pyramidBase.append(1)\n    pyramidBase.append(0)\n\n    pyramidGeometry.addPrimitiveSet(pyramidBase) \n    pyramidFaceOne = osg.DrawElementsUInt(osg.PrimitiveSet.TRIANGLES, 0)\n    pyramidFaceOne.append(0)\n    pyramidFaceOne.append(1)\n    pyramidFaceOne.append(4)\n    pyramidGeometry.addPrimitiveSet(pyramidFaceOne)\n\n    pyramidFaceTwo = osg.DrawElementsUInt(osg.PrimitiveSet.TRIANGLES, 0)\n    pyramidFaceTwo.append(1)\n    pyramidFaceTwo.append(2)\n    pyramidFaceTwo.append(4)\n    pyramidGeometry.addPrimitiveSet(pyramidFaceTwo)\n\n    pyramidFaceThree = osg.DrawElementsUInt(osg.PrimitiveSet.TRIANGLES, 0)\n    pyramidFaceThree.append(2)\n    pyramidFaceThree.append(3)\n    pyramidFaceThree.append(4)\n    pyramidGeometry.addPrimitiveSet(pyramidFaceThree)\n\n    pyramidFaceFour = osg.DrawElementsUInt(osg.PrimitiveSet.TRIANGLES, 0)\n    pyramidFaceFour.append(3)\n    pyramidFaceFour.append(0)\n    pyramidFaceFour.append(4)\n    pyramidGeometry.addPrimitiveSet(pyramidFaceFour)\n\n    colors = osg.Vec4Array()\n    colors.append(osg.Vec4(1.0, 0.0, 0.0, 1.0) ) #index 0 red\n    colors.append(osg.Vec4(0.0, 1.0, 0.0, 1.0) ) #index 1 green\n    colors.append(osg.Vec4(0.0, 0.0, 1.0, 1.0) ) #index 2 blue\n    colors.append(osg.Vec4(1.0, 1.0, 1.0, 1.0) ) #index 3 white\n    colors.append(osg.Vec4(1.0, 0.0, 0.0, 1.0) ) #index 4 red\n\n    pyramidGeometry.setColorArray(colors)\n    pyramidGeometry.setColorBinding(osg.Geometry.BIND_PER_VERTEX)\n\n    texcoords = osg.Vec2Array(5)\n    texcoords[0].set(0.00,0.0) # tex coord for vertex 0 \n    texcoords[1].set(0.25,0.0) # tex coord for vertex 1 \n    texcoords[2].set(0.50,0.0) # \"\"\n    texcoords[3].set(0.75,0.0) # \"\" \n    texcoords[4].set(0.50,1.0) # \"\"\n    pyramidGeometry.setTexCoordArray(0,texcoords)\n\n    return pyramidGeode\n\n\n\n\nroot = osg.Group()\npyramidGeode = createPyramid()\nroot.addChild(pyramidGeode)\n\n\nKLN89FaceTexture = osg.Texture2D()\n\nKLN89FaceTexture.setDataVariance(osg.Object.DYNAMIC) \n\nklnFace = osgDB.readImageFile(\"KLN89FaceB.tga\")\nif klnFace is None:\n    print \" Couldn't find texture, quitting.\"\n    sys.exit(-1)\n\nKLN89FaceTexture.setImage(klnFace)\n\n\nstateOne = osg.StateSet()\n\nstateOne.setTextureAttributeAndModes(0, KLN89FaceTexture, osg.StateAttribute.ON)\npyramidGeode.setStateSet(stateOne)\n\n\nviewer = osgViewer.Viewer()\n\nviewer.setSceneData( root )\n\nviewer.run()\n",
  "line_no": 8,
  "line_no_percent": "8%"
}