{
  "instruction": "The given code is a Python script that defines a management command called \"run\". This command executes a standalone Python script after setting up the Django environment. To use this command, run \"python manage.py run scriptname [args ...]\" where \"scriptname\" is the name of the Python script you want to run and \"[args ...]\" are any command line arguments you want to pass to the script. The script will see the modified values of sys.argv, __name__, and __file__ as if it had been called directly.",
  "buggy_code": "\"\"\"\n\n.. management_command:: run\n\nExecute a standalone Python script after having set up the Django \nenvironment. Also modify `sys.args`, `__file__` and `__name__` so that \nthe invoked script sees them as if it had been called directly.\n\nThis is yet another answer to the frequently asked Django question\nabout how to run standalone Django scripts\n(`[1] <http://stackoverflow.com/questions/4847469/use-django-from-python-manage-py-shell-to-python-script>`__,\n`[2] <http://www.b-list.org/weblog/2007/sep/22/standalone-django-scripts/>`__).\nIt is almost the same as redirecting stdin of Django's ``shell`` command \n(i.e. doing ``python manage.py shell < myscript.py``), \nbut with the possibility of using command line arguments\nand without the disturbing messages from the interactive console.\n\nFor example if you have a file `myscript.py` with the following content...\n\n::\n\n  from myapp.models import Partner\n  print Partner.objects.all()\n\n... then you can run this script using::\n\n  $ python manage.py run myscript.py\n  [<Partner: Rumma & Ko O\u00dc>, ...  <Partner: Charlier Ulrike>, \n  '...(remaining elements truncated)...']\n  \n\"\"\"\n\nfrom __future__ import unicode_literals\n\nimport sys\nfrom django.core.management.base import BaseCommand, CommandError\n\n\nclass Command(BaseCommand):\n    help = __doc__\n    args = \"scriptname [args ...]\"\n\n    def handle(self, *args, **options):\n        return\n        if len(args) == 0:\n            raise CommandError(\"I need at least one argument.\")\n        fn = args[0]\n        sys.argv = sys.argv[2:]\n        globals()['__name__'] = '__main__'\n        globals()['__file__'] = fn\n        execfile(fn, globals())\n",
  "line_no": 44,
  "line_no_percent": "86%"
}