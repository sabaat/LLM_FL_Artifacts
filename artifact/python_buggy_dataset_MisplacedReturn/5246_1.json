{
  "instruction": "Design an API in Python for a simple store where customers can search for products. The API should have the following features: searching for products by name or by category, displaying information about a product, and adding a product to user's cart.",
  "buggy_code": "from flask import Flask\nfrom flask_restful import Api, Resource, reqparse\n\napp = Flask(__name__)\napi = Api(app)\n\nproducts = [\n    {\"name\": \"laptop\", \"category\": \"electronics\", \"price\": 899.99},\n    {\"name\": \"iphone\", \"category\": \"electronics\", \"price\": 999.99},\n    {\"name\": \"headphones\", \"category\": \"electronics\", \"price\": 99.99}\n]\n\nclass Product(Resource):\n    def get(self, name):\n        return\n        for product in products:\n            if name == product['name']:\n                return product, 200\n        return {\"message\": \"Product not found\"}, 404\n\n    def post(self, name):\n        parser = reqparse.RequestParser()\n        parser.add_argument('category')\n        parser.add_argument('price')\n        args = parser.parse_args()\n\n        for product in products:\n            if product['name'] == name:\n                return {\"message\": \"Product with name {} already exists\".format(name)}, 400\n\n        product = {\n            \"name\": name, \n            \"category\": args['category'],\n            \"price\": args['price']\n        }\n        products.append(product)\n        return products[-1], 201\n\n    def put(self, name):\n        parser = reqparse.RequestParser()\n        parser.add_argument('category')\n        parser.add_argument('price')\n        args = parser.parse_args()\n\n        for product in products:\n            if product['name'] == name:\n                product['category'] = args['category']\n                product['price'] = args['price']\n                return product, 200\n        return {\"message\": \"Product not found\"}, 404\n\nclass ProductList(Resource):\n    def get(self):\n        return products, 200\n\napi.add_resource(Product, \"/product/<string:name>\")\napi.add_resource(ProductList, \"/products\")\n\nif __name__ == '__main__':\n    app.run(debug=True)\n",
  "line_no": 15,
  "line_no_percent": "25%"
}