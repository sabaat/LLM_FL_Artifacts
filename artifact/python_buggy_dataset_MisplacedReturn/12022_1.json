{
  "instruction": "Design a chatbot application in Python which can answer simple questions.",
  "buggy_code": "import nltk\nnltk.download('punkt')\nfrom nltk.stem.lancaster import LancasterStemmer\nstemmer = LancasterStemmer()\n\nimport numpy\nimport tflearn\nimport tensorflow\nimport random\nimport json\n\nwith open(\"intents.json\") as file:\n data = json.load(file)\n\nwords = []\nlabels = []\ndocs_x = []\ndocs_y = []\n\nfor intent in data[\"intents\"]:\n for pattern in intent[\"patterns\"]:\n  wrds = nltk.word_tokenize(pattern)\n  words.extend(wrds)\n  docs_x.append(wrds)\n  docs_y.append(intent[\"tag\"])  \n\nwords = [stemmer.stem(w.lower()) for w in words if w != \"?\"]\nwords = sorted(list(set(words)))\n\nlabels = sorted(labels)\n\ntraining = []\noutput = []\n\nout_empty = [0 for _ in range(len(labels))]\n\nfor x, doc in enumerate(docs_x): \n bag = []\n\n w = [stemmer.stem(w.lower()) for w in doc] \n\n for w in words:\n    if w in w:\n        bag.append(1)\n    else:\n        bag.append(0)\n\n output_row = out_empty[:]\n output_row[labels.index(docs_y[x])] = 1\n\n training.append(bag)\n output.append(output_row)\n\ntraining = numpy.array(training)\noutput = numpy.array(output)\n\ntensorflow.reset_default_graph()\nnet = tflearn.input_data(shape=[None, len(training[0])])\nnet = tflearn.fully_connected(net, 8)\nnet = tflearn.fully_connected(net, 8)\nnet = tflearn.fully_connected(net, len(output[0]), activation=\"softmax\")\nnet = tflearn.regression(net)\n\nmodel = tflearn.DNN(net)\n\nmodel.fit(training, output, n_epoch=1000, batch_size=8, show_metric=True)\nmodel.save(\"model.tflearn\")\n\ndef chatbot_response(sentence):\n return\n sentence = sentence.lower()\n\n results = model.predict([bag_of_words(sentence, words)])\n results_index = numpy.argmax(results)\n tag = labels[results_index]\n\n for tg in data[\"intents\"]:\n  if tg['tag'] == tag:\n   responses = tg['responses']\n \n return random.choice(responses)\n",
  "line_no": 70,
  "line_no_percent": "86%"
}