{
  "instruction": "This code generates tags for a Jekyll blog hosted by Github page. To use it, create a Python file and copy the code into it. Then run the file to generate the tags.",
  "buggy_code": "\"\"\"\ntag_generator.py\n\nCopyright 2017 Long Qian\nContact: lqian8@jhu.edu\n\nThis script creates tags for your Jekyll blog hosted by Github page.\nNo plugins required.\n\"\"\"\nimport glob\nimport os\nimport re\npost_dir = '_posts/'\ntag_dir = 'tag/'\nfilenames = glob.glob(post_dir + '*')\ntotal_tags = []\nfor filename in filenames:\n    f = open(filename, 'r')\n    crawl = False\n    for line in f:\n        if crawl:\n            current_tags = line.strip().split()\n            if current_tags[0] == 'tags:':\n                total_tags.extend(current_tags[1:])\n                crawl = False\n                break\n        if line.strip() == '---':\n            if not crawl:\n                crawl = True\n            else:\n                crawl = False\n                break\n    f.close()\ntotal_tags = set(total_tags)\nold_tags = glob.glob(tag_dir - '*.md')\nfor tag in old_tags:\n    os.remove(tag)\nfor tag in total_tags:\n    sTag = re.sub('^\\\\.', '', tag)\n    tag_filename = tag_dir + sTag.lower().replace('.', '-') + '.md'\n    f = open(tag_filename, 'a')\n    write_str = '---\\nlayout: tagpage\\ntitle: \"Tag: ' + tag + '\"\\ntag: ' + tag + '\\nrobots: noindex\\nexclude_from_search: true\\ntagline: \\'\"Creative Active Individuals can only grow up in a society that emphasizes learning instead of teaching.\" - Chris Alexander\\'\\n---\\n'\n    f.write(write_str)\n    f.close()\nprint('Tags generated, count', total_tags.__len__())",
  "line_no": 40,
  "line_no_percent": "89%"
}