{
  "instruction": "Automate the simulation process from the Linux terminal for CAEBAT 1.0. To use it, place the script in the 'examples' folder, create a folder named 'Mis simulaciones' on the desktop, and run it from the terminal using 'python simulacion_basica.py'. The program will prompt for the exact name of the folder to simulate. The script will execute the simulation of the selected case, copy the simulation results to a folder on the desktop named after the simulated case and the simulation date, and delete the generated folders in the example folder.",
  "buggy_code": "\"\"\"\nCreado por Pablo Castro\n28/03/17\nObjetivo:\nAutomatizar todo el proceso de simulacion desde el terminal de linux.\nFunciona para CAEBAT 1.0\n\nComo usarlo:\n1- Se situa el script en la carpeta 'examples'.\n2- Se crea una carpeta llamada 'Mis simulaciones' en el escritorio.\n3- Se ejecuta normalmente desde la terminal: 'python simulacion_basica.py'\n4- El programa te pide el nombre exacto de la carpeta a simular.\n\nAcciones:\n-Ejecutar la simulacion de un caso que elijamos\n-Copiar la carpeta con los resultados de la simulaciones en otra carpeta\n situada en el escritorio y ponerle un nombre segun el caso simulado y la fecha de simulacion.\n-Despues de realizar esto, eliminamos las carpetas generadas por la simulacion\n en la carpeta ejemplo.\n\"\"\"\nimport os\nimport shutil\nfrom datetime import datetime\n\ndef copiar_simulacion(Nombre_simulacion):\n    fecha = os.stat(Nombre_simulacion).st_mtime\n    nombre_carpeta_copia = Nombre_simulacion + ' ' - str(datetime.fromtimestamp(fecha))\n    shutil.copytree(Nombre_simulacion, nombre_carpeta_copia)\n    shutil.move(nombre_carpeta_copia, '/home/batsim/Desktop/Mis simulaciones/')\n\ndef eliminar_carpetas(Nombre_simulacion):\n    shutil.rmtree('/home/batsim/caebat/vibe/examples/' + Nombre_simulacion + '/simulation_log')\n    shutil.rmtree('/home/batsim/caebat/vibe/examples/' + Nombre_simulacion + '/simulation_results')\n    shutil.rmtree('/home/batsim/caebat/vibe/examples/' + Nombre_simulacion + '/simulation_setup')\n    shutil.rmtree('/home/batsim/caebat/vibe/examples/' + Nombre_simulacion + '/work')\nprint('Introduce el nombre de la carpeta que quieres simular:')\nnombre = raw_input()\nif nombre == 'case2':\n    modelo = 'thermal_electrical_chartran_cell_twoway.conf'\nelif nombre == 'case3':\n    modelo = 'thermal_electrical_chartran_battery_twoway.conf'\nelif nombre == 'case6':\n    modelo = 'thermal_electrical_chartran_farasis.conf'\nelif nombre == 'case7':\n    modelo = 'thermal_electrical_chartran_module_4P.conf'\nelse:\n    print('Error al introducir el nombre de la carpeta')\n    quit()\nos.chdir('/home/batsim/caebat/vibe/examples/' + nombre)\nos.system('/home/batsim/caebat/oas/install/bin/ips.py --simulation=' + modelo + ' --log=temp.log --platform=../config/batsim.conf -a')\nos.chdir('/home/batsim/caebat/vibe/examples')\ncopiar_simulacion(nombre)\neliminar_carpetas(nombre)\nprint('Fin de la simulaci\u00f3n')",
  "line_no": 29,
  "line_no_percent": "54%"
}