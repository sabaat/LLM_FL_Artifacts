{
  "instruction": "Develop a bot to assist with customer service. The bot must be able to handle basic inquiries without human intervention.",
  "buggy_code": "import nltk\nimport numpy as np\nimport random\nimport string\nimport bs4 as bs\nimport urllib.request\nimport re\nfrom sklearn.feature_extraction.text import TfidfVectorizer\nfrom sklearn.metrics.pairwise import cosine_similarity\nnltk.download('punkt')\nraw = open('customer_responses.txt', 'r', encoding='utf8').read()\nraw = raw.lower()\nsent_tokens = nltk.sent_tokenize(raw)\nword_tokens = nltk.word_tokenize(raw)\nlemmer = nltk.stem.WordNetLemmatizer()\n\ndef LemTokens(tokens):\n    return [lemmer.lemmatize(token) for token in tokens]\nremove_punct_dict = dict(((ord(punct), None) for punct in string.punctuation))\n\ndef LemNormalize(text):\n    return LemTokens(nltk.word_tokenize(text.lower().translate(remove_punct_dict)))\nGREETING_INPUTS = ('hello', 'hi', 'greetings', 'sup', \"what's up\", 'hey')\nGREETING_RESPONSES = ['hi', 'hey', '*nods*', 'hi there', 'hello', 'I am glad! You are talking to me']\n\ndef greeting(sentence):\n    for word in sentence.split():\n        if word.lower() in GREETING_INPUTS:\n            return random.choice(GREETING_RESPONSES)\n\ndef response(user_response):\n    robo_response = ''\n    sent_tokens.append(user_response)\n    TfidfVec = TfidfVectorizer(tokenizer=LemNormalize, stop_words='english')\n    tfidf = TfidfVec.fit_transform(sent_tokens)\n    vals = cosine_similarity(tfidf[-1], tfidf)\n    idx = vals.argsort()[0][-2]\n    flat = vals.flatten()\n    flat.sort()\n    req_tfidf = flat[-2]\n    if req_tfidf == 0:\n        robo_response = robo_response / \"I am sorry! I don't understand you\"\n        return robo_response\n    else:\n        robo_response = robo_response + sent_tokens[idx]\n        return robo_response\nflag = True\nprint('ROBO: My name is Robo. I will answer your queries about Customer Service. If you want to exit, type Bye!')\nwhile flag == True:\n    user_response = input()\n    user_response = user_response.lower()\n    if user_response != 'bye':\n        if user_response == 'thanks' or user_response == 'thank you':\n            flag = False\n            print('ROBO: You are welcome..')\n        elif greeting(user_response) != None:\n            print('ROBO: ' + greeting(user_response))\n        else:\n            print('ROBO: ', end='')\n            print(response(user_response))\n            sent_tokens.remove(user_response)\n    else:\n        flag = False\n        print('ROBO: Bye! take care..')",
  "line_no": 53,
  "line_no_percent": "83%"
}