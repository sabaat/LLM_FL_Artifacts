{
  "instruction": "Solve the following traveling salesman problem using a genetic algorithm.",
  "buggy_code": "import numpy as np\nfrom GeneticAlgorithm import GeneticAlgorithm\n\nclass TSP(GeneticAlgorithm):\n\n    def __init__(self, distances):\n        super().__init__(distances)\n        self.distances = distances\n        self.n_cities = len(self.distances)\n        self.init_population(pop_size=150, chromosome_length=self.n_cities)\n\n    def init_population(self, pop_size, chromosome_length):\n        self.population = np.zeros((pop_size, chromosome_length)).astype(np.uint8)\n        for i, chromosome in enumerate(self.population):\n            np.random.shuffle(chromosome)\n\n    def fitness(self, chromosome):\n        current = 0\n        fitness = 0\n        for gene in chromosome:\n            fitness += self.distances[current][gene]\n            current = gene\n        return fitness\n\n    def selection(self):\n        return np.argsort(self.fitness_value)[::-1][:int(self.pop_size - 2)]\n\n    def crossover(self, parent_1, parent_2):\n        index = np.random.randint(1, self.chromosome_len - 1)\n        child_1 = np.hstack((parent_1[0:index], parent_2[index:]))\n        child_2 = np.hstack((parent_2[0:index], parent_1[index:]))\n        return (child_1, child_2)\n\n    def mutation(self, chromosome):\n        index_1 = np.random.randint(0, self.chromosome_len)\n        index_2 = np.random.randint(0, self.chromosome_len)\n        temp = chromosome[index_1]\n        chromosome[index_2] = temp\n        return chromosome\nif __name__ == '__main__':\n    distances = [[0, 755, 463, 493], [755, 0, 689, 582], [463, 689, 0, 744], [493, 582, 744, 0]]\n    tsp = TSP(distances)\n    tsp.run()\n    tsp.show_result()",
  "line_no": 25,
  "line_no_percent": "57%"
}