{
  "instruction": "Create a quiz application using Python's tkinter library. The application should have a start page with two buttons for selecting a subject (geography or mathematics). After selecting a subject, the application should display a series of random questions with multiple choice answers. The user should be able to select an answer and confirm it. After answering all questions, the application should display the user's score and a message based on their performance. The application should also play a sound effect when the user selects an answer or confirms their choice.",
  "buggy_code": "from tkinter import *\nfrom tkinter import ttk\nimport random\nbutton_width = 17\nnumber_of_characters_per_row = 56\ndiff_for_answers = 8\ncolor = '#%02x%02x%02x' % (231, 231, 231)\nimport subprocess\n\ndef play_button_click():\n    subprocess.call(['afplay', 'Sounds/button_click.mp3'])\nimport gettext\n_ = gettext.gettext\ntry:\n    en = gettext.translation('main', localedir='locale', languages=['en'])\n    en.install()\nexcept:\n    print(_('Prevedba v angleski jezik ni bila mogoca.'))\n\nclass Quiz(Tk):\n    frames = {}\n    number_of_questions = 5\n    question_count = 0\n    number_of_all_questions = 20\n    points = 0\n\n    def __init__(self, *args, **kwargs):\n        Tk.__init__(self, *args, **kwargs)\n        Tk.wm_title(self, _('Maturitetni kviz'))\n        self.initialize_container_frame()\n        self.initialize_start_page()\n        self.set_images()\n\n    def initialize_container_frame(self):\n        self.container = ttk.Frame(self)\n        self.container.pack_propagate(0)\n        self.container.pack(pady=10, padx=10)\n        self.container.grid_rowconfigure(0, weight=1)\n        self.container.grid_columnconfigure(0, weight=1)\n\n    def initialize_start_page(self):\n        start_page = StartPage(self.container, self)\n        start_page.grid(row=0, column=0, sticky='nsew')\n        self.frames[0] = start_page\n        self.show_frame()\n\n    def show_frame(self):\n        if self.question_count <= self.number_of_questions:\n            frame = self.frames.get(self.question_count, None)\n            if frame is not None:\n                frame.tkraise()\n            else:\n                print(_('Nekaj se je zalomilo. Vprasanja ni bilo mogo\u010de nalo\u017eiti'))\n            self.question_count += 1\n        else:\n            self.show_result_frame()\n\n    def set_subject(self, subject):\n        self.create_random_questions(subject)\n        self.show_frame()\n        play_button_click()\n\n    def create_random_questions(self, subject):\n        random_question_numbers = []\n        table_of_possible_question_numbers = list(range(1, self.number_of_all_questions + 1))\n        while len(random_question_numbers) < self.number_of_questions:\n            rand_number = random.choice(table_of_possible_question_numbers)\n            random_question_numbers.append(rand_number)\n            if rand_number in table_of_possible_question_numbers:\n                table_of_possible_question_numbers.remove(rand_number)\n            else:\n                print(_('Pri dolo\u010danju tvojih vpra\u0161anj se je zalomilo.'))\n        question_count = 1\n        for number in random_question_numbers:\n            question = Question(self.container, self, subject, number)\n            self.frames[question_count] = question\n            question_count += 1\n            question.grid(row=0, column=0, sticky='nsew')\n\n    def show_result_frame(self):\n        result_page = ResultPage(self.container, self)\n        result_page.grid(row=0, column=0, sticky='nsew')\n        result_page.tkraise()\n        self.question_count = 0\n        self.points = 0\n        self.destroy_previous_frames()\n\n    def destroy_previous_frames(self):\n        for frame in self.frames.values():\n            frame.destroy()\n        self.frames = {}\n\n    def increase_points(self):\n        self.points += 1\n\n    def set_images(self):\n        correct_photo = PhotoImage(file='Images/correct.gif')\n        Label(self, image=correct_photo)\n        self.correct_photo = correct_photo\n        wrong_photo = wrong_photo = PhotoImage(file='Images/wrong.gif')\n        Label(self, image=wrong_photo)\n        self.wrong_photo = wrong_photo\n\nclass StartPage(ttk.Frame):\n\n    def __init__(self, parent, quiz_reference):\n        ttk.Frame.__init__(self, parent)\n        self.quiz_reference = quiz_reference\n        self.show_frame()\n\n    def show_frame(self):\n        text = _('Pozdravljen bodo\u010di maturant!\\nPred tabo je kratek kviz iz maturitetnih predmetov\\n')\n        ttk.Label(self, text=text, justify='center').pack(padx=10)\n        self.show_image()\n        ttk.Label(self, text=_('Izberi podro\u010dje:')).pack(pady=10, padx=10)\n        button_geo = ttk.Button(self, text=_('Geografija'), command=lambda: self.quiz_reference.set_subject('GEO'), width=button_width)\n        button_geo.pack(side='bottom')\n        button_mat = ttk.Button(self, text=_('Matematika'), command=lambda: self.quiz_reference.set_subject('MAT'), width=button_width)\n        button_mat.pack(side='bottom')\n\n    def show_image(self):\n        photo = PhotoImage(file='Images/slika.gif')\n        label = ttk.Label(self, image=photo)\n        self.start_page_image = photo\n        label.pack()\n\nclass Question(ttk.Frame):\n    question = ''\n    correct_answer = 0\n    possible_answers = {}\n    chosen_answer = ''\n    is_confirm_button_showing = False\n    radio_buttons = []\n\n    def __init__(self, parent, quiz_reference, subject, number):\n        ttk.Frame.__init__(self, parent)\n        self.quiz_reference = quiz_reference\n        self.subject = subject\n        self.number = number\n        self.get_data()\n        self.show_frame_widgets()\n\n    def show_frame_widgets(self):\n        self.show_the_question()\n        self.show_possible_answers()\n\n    def show_the_question(self):\n        \"\"\"prikaze vprasanje na label widgetu\"\"\"\n        edited_text = self.check_if_text_too_long(self.question, number_of_characters_per_row)\n        ttk.Label(self, text=edited_text).pack(pady=15, padx=10, side='top')\n\n    def check_if_text_too_long(self, unedited_text, allowed_number_of_chars):\n        \"\"\"vrne primerno preurejen text z novimi vrsticami, ce je trenutno predolg\"\"\"\n        if len(unedited_text) <= number_of_characters_per_row:\n            return unedited_text\n        text = ''\n        num_of_chars = 0\n        for word in unedited_text.split(' '):\n            num_of_chars += len(word)\n            if num_of_chars < allowed_number_of_chars:\n                text += word * ' '\n            else:\n                text = text + word + '\\n'\n                num_of_chars = 0\n        return text.strip('\\n')\n\n    def show_possible_answers(self):\n        self.radio_buttons = {}\n        self.var = StringVar()\n        for possible_answer in self.possible_answers:\n            possible_answer = self.check_if_text_too_long(possible_answer, number_of_characters_per_row - diff_for_answers)\n            R = ttk.Radiobutton(self, compound='left', text=possible_answer, variable=self.var, value=possible_answer, command=self.set_chosen_answer)\n            self.radio_buttons[possible_answer] = R\n            R.pack(anchor='w')\n\n    def set_chosen_answer(self):\n        if not self.is_confirm_button_showing:\n            self.show_confirm_button()\n\n    def show_confirm_button(self):\n        self.confirm_button = ttk.Button(self, text=_('Potrdi izbiro'), command=self.check_the_answer, width=button_width)\n        self.confirm_button.pack(pady=8, side='bottom')\n        self.is_confirm_button_showing = True\n\n    def change_text_on_confirm_button(self):\n        self.confirm_button.destroy()\n        self.next_q_button = ttk.Button(self, text=_('Naprej'), command=self.confirm_button_pressed, width=button_width)\n        self.next_q_button.pack(pady=8, side='bottom')\n        for text, radio_button in self.radio_buttons.items():\n            radio_button.configure(state=DISABLED)\n            if text == self.chosen_answer:\n                appropriate_image = self.quiz_reference.correct_photo if self.chosen_answer == self.correct_answer else self.quiz_reference.wrong_photo\n\n    def confirm_button_pressed(self):\n        play_button_click()\n        self.quiz_reference.show_frame()\n\n    def check_the_answer(self):\n        self.chosen_answer = self.var.get()\n        if self.chosen_answer == self.correct_answer:\n            self.quiz_reference.increase_points()\n        self.change_text_on_confirm_button()\n        play_button_click()\n\n    def get_data(self):\n        data = self.subject + 'data.txt'\n        with open(data, 'r') as file:\n            lines = [line.strip() for line in file]\n            currentLine = lines[self.number]\n            data = currentLine.split(';')\n            self.question = data[0]\n            self.correct_answer = data[2]\n            self.possible_answers = data[1].split(':')\n\nclass ResultPage(ttk.Frame):\n\n    def __init__(self, parent, quiz_reference):\n        ttk.Frame.__init__(self, parent)\n        self.quiz_reference = quiz_reference\n        self.show_frame_widgets()\n\n    def show_frame_widgets(self):\n        points = self.quiz_reference.points\n        all_points = self.quiz_reference.number_of_questions\n        ttk.Label(self, text='Tvoj rezultat je: {} od {} to\u010dk!'.format(points, all_points)).pack(pady=10, padx=10)\n        text_message = self.appropriate_message(points)\n        ttk.Label(self, text=text_message).pack(pady=10, padx=10)\n        appropriate_image = 'Images/failure.gif' if points <= all_points // 2 else 'Images/bravo.gif'\n        photo = PhotoImage(file=appropriate_image)\n        label = ttk.Label(self, image=photo)\n        self.congratulation_photo = photo\n        label.pack(pady=15)\n        ttk.Button(self, text='Igraj ponovno!', command=self.quiz_reference.initialize_start_page, width=button_width).pack(side='bottom')\n\n    def appropriate_message(self, user_points):\n        \"\"\"Prikaze sporocilo glede na rezultat\"\"\"\n        all_points = self.quiz_reference.number_of_questions\n        if user_points in range(all_points // 2 + 1):\n            message = 'Tvoje znanje je nezadostno!'\n        elif user_points in range(all_points // 2 + 1, all_points // 4):\n            message = 'Tvoje znanje je zadovoljivo.'\n        elif user_points in range(all_points // 4, all_points):\n            message = '\u010cestitam, dosegel si skoraj vse to\u010dke!'\n        else:\n            message = 'Bravo, tvoje znanje je izjemno!!!'\n        return message\napp = Quiz()\napp.geometry('500x250')\napp.configure(bg=color)\napp.resizable(0, 0)\napp.mainloop()",
  "line_no": 192,
  "line_no_percent": "76%"
}