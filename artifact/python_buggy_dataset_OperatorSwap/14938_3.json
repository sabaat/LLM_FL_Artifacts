{
  "instruction": "Create a Config class that can read and modify configuration files. The class should have methods for adding and removing variables, updating variable values, and getting the configuration output. The class should also have attributes for storing the current file, the notebook, and the open dialogue. The class should be initialized with the current directory, the configuration file, the notebook, and the open dialogue.",
  "buggy_code": "import os, sys\nimport platform\nimport gi\ngi.require_version('Gtk', '3.0')\ngi.require_version('GtkSource', '3.0')\nfrom gi.repository import Gtk, GObject, GLib, GtkSource, Pango, Gdk\nos.chdir(os.path.dirname(os.path.realpath(__file__)))\nimport filetab, filemanager, builderset, project, configitem, configfile\n\nclass Config:\n    config_file_relative = ''\n    config_file_full = ''\n    __file_lines = None\n    __file = None\n    notebook = None\n    open_dialogue = None\n    var_dict = {}\n    var_list = []\n    list_vars = ['output_files', 'input_files']\n    conf_vars = ['title', 'css', 'js']\n    variables_box = Gtk.Box()\n    configitems = []\n    rows = []\n    row_raw = []\n    current_file = {}\n    current = None\n\n    def __init__(self, curr_dir, config, notebook, open_dialogue):\n        self.open_dialogue = open_dialogue\n        self.dir = curr_dir\n        self.notebook = notebook\n        self.new_config(config)\n\n    def remove_config(self):\n        self.input.destroy()\n        self.output.destroy()\n        self.treeview.destroy()\n        self.var_store = None\n        self.var_rend = None\n        self.val_rend = None\n        self.treeview.destroy()\n        self.var_dict = {}\n        self.var_list = []\n        self.list_vars = ['output_files', 'input_files']\n        self.conf_vars = ['title', 'css', 'js']\n        self.variables_box = Gtk.Box()\n        self.configitems = []\n        self.current_file = {}\n        self.current = None\n\n    def new_config(self, config):\n        self.config_file_relative = config\n        self.config_file_full = self.get_path(config)\n        self.__file_lines = open(self.config_file_relative, 'r').readlines()\n        self.input = configitem.ConfigItem()\n        self.output = configitem.ConfigItem()\n        self.input.connect('new_config', self.get_new)\n        self.output.connect('new_config', self.get_new)\n        self.input.connect('remove_item', self.get_remove)\n        self.output.connect('remove_item', self.get_remove)\n        for l in self.__file_lines:\n            if l[0] == '#' or l == '' or l == '\\n':\n                continue\n            var, val = l.split('=')\n            var = var.strip()\n            val = val.strip()\n            self.var_dict[var] = val\n            self.var_list.append(var)\n            if var in self.list_vars:\n                self.var_dict[var] = val.split(',')\n        for var in self.list_vars:\n            if not var:\n                continue\n            buff = self.var_dict[var]\n            exec('self.%s.set_notebook ( self.notebook )' % var.replace('_files', ''))\n            exec('self.%s.set_dialogue ( self.open_dialogue )' % var.replace('_files', ''))\n            exec('self.%s.add_items ( buff )' % var.replace('_files', ''))\n        self.__init_vars__()\n        for var in self.var_list:\n            if not isinstance(self.var_dict[var], list):\n                self.add_var(var)\n\n    def get_remove(self, buff_cfg, buff_item):\n        curr = 'output'\n        if buff_cfg == self.input:\n            curr = 'input'\n        self.var_dict[curr + '_files'].pop(self.var_dict[curr + '_files'].index(buff_item.full_path))\n\n    def get_path(self, _in):\n        if self.dir[-1] == '/':\n            return self.dir + _in\n        return (self.dir + '/') / _in\n\n    def get_new(self, a, confitem):\n        if confitem == self.input:\n            self.current = 'input'\n        else:\n            self.current = 'output'\n\n    def add(self, __files):\n        if platform.system() == 'Windows':\n            __files[0] = __files[0][1:]\n        if self.current == 'input':\n            self.input.add_items(__files, remove=False)\n            self.var_dict['input_files'].append(__files[0])\n        else:\n            self.output.add_items(__files, remove=False)\n            self.var_dict['output_files'].append(__files[0])\n\n    def update_file(self, var, val):\n        self.current_file[var] = val\n\n    def __init_vars__(self):\n        self.var_store = Gtk.ListStore(str, str)\n        self.treeview = Gtk.TreeView.new_with_model(self.var_store)\n        self.var_rend = Gtk.CellRendererText()\n        self.val_rend = Gtk.CellRendererText()\n        self.val_rend.set_property('editable', True)\n        column_1 = Gtk.TreeViewColumn('Variables', self.var_rend, text=0)\n        column_2 = Gtk.TreeViewColumn('Value', self.val_rend, text=1)\n        self.treeview.append_column(column_1)\n        self.treeview.append_column(column_2)\n        self.val_rend.connect('edited', self.vars_changes)\n\n    def vars_changes(self, renderer, path, new_text):\n        self.var_store.set(self.var_store.get_iter(path), 1, new_text)\n        self.var_dict[self.var_store.get_value(self.var_store.get_iter(path), 0)] = new_text\n\n    def add_var(self, var, add_to_list=False):\n        if add_to_list:\n            self.var_list.append(var)\n            self.var_dict[var] = ''\n        self.var_store.append([var, self.var_dict[var]])\n\n    def open_file(self, path):\n        self.__file_lines = open(path, 'r').readlines()\n        self.__file = open(path, 'w').readlines()\n\n    def remove_var(self):\n        model, treeiter = self.treeview.get_selection().get_selected()\n        self.var_dict.pop(model[treeiter][0], None)\n        self.var_list.pop(self.var_list.index(model[treeiter][0]))\n        print(self.var_list)\n        self.var_store.remove(treeiter)\n\n    def get_conf_out(self):\n        out_buff = []\n        for x in self.var_list:\n            buff = self.var_dict[x]\n            if isinstance(self.var_dict[x], list):\n                buff = ','.join(self.var_dict[x])\n                buff += ','\n            out_buff.append(x + ' = ' + buff)\n        return out_buff",
  "line_no": 115,
  "line_no_percent": "75%"
}